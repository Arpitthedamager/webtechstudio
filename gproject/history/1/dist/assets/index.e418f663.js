import{i as ue,w as k,o as Q,a as R,u as M,r as m,b as Z,p as pe,c as fe,d as _e,e as ee,f as D,g as h,h as b,j as t,n as A,k as B,l as _,m as v,q as E,s as P,t as I,v as T,x as W,y as w,F as H,z as j,A as q,B as K,C as V,D as ve,E as he,G as g,H as me,I as ye,J as be}from"./vendor.21cf6363.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function e(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(a){if(a.ep)return;a.ep=!0;const i=e(a);fetch(a.href,i)}})();function $(n,s,e){const o=()=>{var a;(a=M(n))==null||a.addEventListener(s,e)};ue(n)&&k(n,o),Q(o),R(()=>{var a;(a=M(n))==null||a.removeEventListener(s,e)})}function ge(n,s){$(n,"wheel",e=>{if(e.preventDefault(),e.ctrlKey){const o=s.scale-e.deltaY/100;s.scale=o}else s.x-=e.deltaX,s.y-=e.deltaY})}function we(n,s,e){$(n,"mousedown",()=>e.value=!0),$(window,"mouseup",()=>e.value=!1),$(window,"mousemove",o=>{e.value&&(o.preventDefault(),s.x+=o.movementX,s.y+=o.movementY)})}function ke(n){const s=a=>a&&{width:a.clientWidth,height:a.clientHeight},e=m(s(n.value)),o=new ResizeObserver(()=>{e.value=s(n.value)});return k(n,()=>{n.value&&o.observe(n.value)}),Q(()=>{n.value&&o.observe(n.value)}),R(()=>{n.value&&o.unobserve(n.value)}),e}function xe(n){return new Promise(s=>{const e=new Image;return e.onload=()=>s(e),e.src=`data:image/svg+xml;base64,${Z.Buffer.from(n).toString("base64")}`,e})}function Ce(n,s,e=0){const o=s.width/s.height,a={width:n.width-e*2,height:n.height-e*2},i={width:a.width,height:a.width/o},r={width:o*a.height,height:a.height};return i.height<=a.height?i:r}function Y(n){return{x:n.width/2,y:n.height/2}}function X(n,s){return Math.min(s,Math.max(-s,n))}const Le=pe(fe);async function Se(n){const s=await n.arrayBuffer(),e=await Le(new Uint8Array(s));return await Ie(e)}async function Ie(n){const s=[];for(const e of Object.keys(n)){const{type:o,side:a}=Me(e);s.push({type:o,side:a,gerber:Z.Buffer.from(n[e]),filename:e})}return s}function Me(n){let s=null,e=null;const o=n.toLowerCase().split(/_|-|\./);switch(o[o.length-1]){case"gtl":return{type:"copper",side:"top"};case"gto":return{type:"silkscreen",side:"top"};case"gtp":return{type:"solderpaste",side:"top"};case"gts":return{type:"soldermask",side:"top"};case"gbl":return{type:"copper",side:"bottom"};case"gbo":return{type:"silkscreen",side:"bottom"};case"gbp":return{type:"solderpaste",side:"bottom"};case"gbs":return{type:"soldermask",side:"bottom"};case"gko":return{type:"outline",side:"all"};case"drl":return{type:"drill",side:"all"}}return o.find(i=>i.includes("edge"))||o.find(i=>i.includes("outline"))?{type:"outline",side:"all"}:(o.includes("sm")||o.find(i=>i.includes("mask"))?s="soldermask":o.includes("sp")||o.find(i=>i.includes("paste"))?s="solderpaste":o.includes("ss")||o.find(i=>i.includes("silk"))?s="silkscreen":o.includes("cu")&&(s="copper"),o.find(i=>i.startsWith("in"))?e="inner":o.includes("f")||o.find(i=>i.includes("top"))?e="top":(o.includes("b")||o.find(i=>i.includes("bottom")))&&(e="bottom"),e=="inner"&&!s&&(s="copper"),{type:s,side:e})}const te={green:["#004200bf","#ffffff"],red:["#b20000bf","#ffffff"],yellow:["#ff9900bf","#ffffff"],blue:["#004284bf","#ffffff"],white:["#ffffffbf","#000000"],black:["#000000bf","#ffffff"],purple:["#480084bf","#ffffff"]},ze={gold:"#cc9933",tin:"#f5f5f5"},Fe="#999999";async function Oe(n,s){const[e,o]=te[s.sm],a=s.sp?Fe:"transparent",i=ze[s.cf];return await _e(n,{color:{sm:e,ss:o,sp:a,cf:i}})}const Ee=ee({__name:"GerberView",props:{layers:null,render:null},setup(n){const s=n,e=m();k(s,async()=>{const f=await Oe(s.layers,s.render);e.value=await xe(f[s.render.side].svg)});const o=m(),a=m(),i=ke(o),r=D({x:0,y:0,scale:0}),z=m(!1);return k([e,i,r],()=>{const f=a.value;if(!f||!i.value||(f.width=i.value.width,f.height=i.value.height,!e.value)||!e.value.width||!e.value.height)return;const d=f.getContext("2d");if(!d)return;const y=Ce(f,e.value),x=Y(f),C=Y(y);r.scale=Math.min(5,Math.max(-2,r.scale));const L=Math.pow(2,r.scale);r.x=X(r.x,x.x+C.x*L-50),r.y=X(r.y,x.y+C.y*L-50),d.save(),d.translate(x.x,x.y),d.translate(r.x,r.y),d.scale(L,L),d.translate(-C.x,-C.y),d.drawImage(e.value,0,0,y.width,y.height),d.restore()}),k(e,()=>{r.scale=0,r.x=0,r.y=0}),ge(a,r),we(a,r,z),(f,d)=>(h(),b("div",{ref:y=>o.value=y,class:A(f.$style.container)},[t("canvas",{ref:y=>a.value=y,class:A({[f.$style.dragging]:z.value})},null,2)],2))}}),Ve="_container_1vsww_1",Ue="_dragging_1vsww_9",$e={container:Ve,dragging:Ue},se=(n,s)=>{const e=n.__vccOpts||n;for(const[o,a]of s)e[o]=a;return e},Ae={$style:$e},J=se(Ee,[["__cssModules",Ae]]),u=n=>(ve("data-v-d542581b"),n=n(),he(),n),Ne={class:"app-container"},Be={class:"content-wrapper"},De={key:0,class:"card upload-card"},Ge=u(()=>t("h2",{class:"section-title"},"Choose Gerber/file or drag & drop here",-1)),Pe={class:"upload-area"},Te=u(()=>t("div",{class:"upload-content"},[t("div",{class:"plus-icon"},"+"),t("p",{class:"upload-text"},"File format should be"),t("p",{class:"upload-subtext"},"only accepted .zip or .rar file")],-1)),We={key:1,class:"loading-overlay"},He=u(()=>t("div",{class:"loading-spinner"},null,-1)),je=u(()=>t("p",null,"Processing Gerber files...",-1)),qe=[He,je],Ke={key:2,class:"preview-section card"},Ye={class:"pcb-views"},Xe={class:"pcb-view"},Je={class:"pcb-view"},Qe={key:3,class:"card main-card"},Re={class:"dimensions-section"},Ze=u(()=>t("label",{class:"section-title"},"Dimensions",-1)),et={class:"dimensions-inputs"},tt=u(()=>t("span",{class:"dimension-separator"},"x",-1)),st=u(()=>t("option",{value:"mm"},"mm",-1)),ot=u(()=>t("option",{value:"in"},"in",-1)),nt=[st,ot],at={class:"info-grid"},it={class:"info-item"},lt=u(()=>t("label",{class:"info-label"},"File Name",-1)),ct={class:"info-value"},rt={class:"info-item"},dt=u(()=>t("label",{class:"info-label"},"Total Layers",-1)),ut={class:"info-value"},pt={class:"info-item"},ft=u(()=>t("label",{class:"info-label"},"Copper Layers",-1)),_t={class:"info-value"},vt={class:"info-item"},ht=u(()=>t("label",{class:"info-label"},"Mask Layers",-1)),mt={class:"info-value"},yt={class:"info-item"},bt=u(()=>t("label",{class:"info-label"},"Mask Color",-1)),gt={class:"color-select"},wt=["value"],kt={class:"info-item"},xt=u(()=>t("label",{class:"info-label"},"Number of Pads",-1)),Ct={class:"info-value"},Lt={class:"output-section"},St=u(()=>t("label",{class:"section-title"},"Output :",-1)),It={class:"format-section"},Mt=u(()=>t("label",{class:"format-label"},"Format",-1)),zt={class:"format-buttons"},Ft={class:"checkbox-group"},Ot={class:"checkbox-label"},Et=u(()=>t("span",null,"Output Layered files",-1)),Vt={class:"checkbox-label"},Ut=u(()=>t("span",null,"Export relief texture",-1)),$t=u(()=>t("button",{class:"output-button"}," Output File ",-1)),At={class:"layer-settings-content"},Nt={class:"layers-list"},Bt={class:"layer-name"},Dt={class:"layer-controls"},Gt=g("Drill"),Pt=g("Copper"),Tt=g("Silkscreen"),Wt=g("Soldermask"),Ht=g("Ignore"),jt={key:0,class:"side-buttons"},qt=g(" Top "),Kt=g(" Bottom "),Yt=g(" Inner "),Xt={class:"modal-footer"},Jt=g("Restore Default"),Qt=g("Apply"),Rt=ee({__name:"App",setup(n){const s=m(),e=m([]),o=m(!1),a=m(!1),i=m(0),r=m("svg"),z=m(!0),f=m(!1),d=D({length:"100",width:"100",unit:"mm"}),y=D({side:"top",sm:"blue",cf:"gold",sp:!1}),x=B(()=>e.value.filter(p=>{var l;return(l=p.type)==null?void 0:l.includes("copper")}).length||0),C=B(()=>e.value.filter(p=>{var l;return(l=p.type)==null?void 0:l.includes("mask")}).length||0),L=B(()=>e.value.reduce((p,l)=>l.type==="copper"?p+0:p,0));function S(){i.value++,K(()=>{})}function ne(){S()}function N(p,l){p.side=l,S()}function ae(){e.value.forEach(p=>{p.type=void 0,p.side=void 0}),S()}function ie(){a.value=!1,S()}async function le({file:p}){o.value=!0;try{s.value=p,e.value=await Se(p),d.length="100",d.width="100",await K(),S()}catch(l){console.error("Error loading Gerber file:",l)}finally{o.value=!1}}return k(()=>d.unit,p=>{if(d.length&&d.width){const l=p==="mm"?25.4:.03937007874015748;d.length=(parseFloat(d.length)*l).toFixed(2),d.width=(parseFloat(d.width)*l).toFixed(2)}}),k(e,()=>{S()},{deep:!0}),(p,l)=>{var G;const ce=V("a-upload"),F=V("a-select-option"),re=V("a-select"),O=V("a-button"),de=V("a-modal");return h(),b("div",Ne,[t("div",Be,[s.value?E("",!0):(h(),b("div",De,[Ge,t("div",Pe,[_(ce,{"custom-request":le,"show-upload-list":!1,accept:".zip,application/zip",class:"upload-container"},{default:v(()=>[Te]),_:1})])])),o.value?(h(),b("div",We,qe)):E("",!0),e.value.length&&!o.value?(h(),b("div",Ke,[t("div",Ye,[t("div",Xe,[(h(),P(J,{key:"top-"+i.value,layers:e.value,render:{...y,side:"top"},class:"pcb-canvas"},null,8,["layers","render"]))]),t("div",Je,[(h(),P(J,{key:"bottom-"+i.value,layers:e.value,render:{...y,side:"bottom"},class:"pcb-canvas"},null,8,["layers","render"]))])]),t("button",{class:"layer-settings-button",onClick:l[0]||(l[0]=c=>a.value=!0)},"Layer Settings")])):E("",!0),s.value&&!o.value?(h(),b("div",Qe,[t("div",Re,[Ze,t("div",et,[I(t("input",{"onUpdate:modelValue":l[1]||(l[1]=c=>d.length=c),type:"text",placeholder:"Length",class:"dimension-input"},null,512),[[T,d.length]]),tt,I(t("input",{"onUpdate:modelValue":l[2]||(l[2]=c=>d.width=c),type:"text",placeholder:"Width",class:"dimension-input"},null,512),[[T,d.width]]),I(t("select",{"onUpdate:modelValue":l[3]||(l[3]=c=>d.unit=c),class:"dimension-select"},nt,512),[[W,d.unit]])])]),t("div",at,[t("div",it,[lt,t("span",ct,w(((G=s.value)==null?void 0:G.name)||"-"),1)]),t("div",rt,[dt,t("span",ut,w(e.value.length||"-"),1)]),t("div",pt,[ft,t("span",_t,w(M(x)),1)]),t("div",vt,[ht,t("span",mt,w(M(C)),1)]),t("div",yt,[bt,t("div",gt,[I(t("select",{"onUpdate:modelValue":l[4]||(l[4]=c=>y.sm=c),class:"color-dropdown"},[(h(!0),b(H,null,j(Object.keys(M(te)),c=>(h(),b("option",{key:c,value:c},w(c.charAt(0).toUpperCase()+c.slice(1)),9,wt))),128))],512),[[W,y.sm]])])]),t("div",kt,[xt,t("span",Ct,w(M(L)),1)])]),t("div",Lt,[St,t("div",It,[Mt,t("div",zt,[t("button",{class:A(["format-button",{active:r.value==="svg"}]),onClick:l[5]||(l[5]=c=>r.value="svg")},"SVG",2),t("button",{class:A(["format-button",{active:r.value==="png"}]),onClick:l[6]||(l[6]=c=>r.value="png")},"PNG",2)])]),t("div",Ft,[t("label",Ot,[I(t("input",{type:"checkbox","onUpdate:modelValue":l[7]||(l[7]=c=>z.value=c),class:"checkbox-input"},null,512),[[q,z.value]]),Et]),t("label",Vt,[I(t("input",{type:"checkbox","onUpdate:modelValue":l[8]||(l[8]=c=>f.value=c),class:"checkbox-input"},null,512),[[q,f.value]]),Ut])])]),$t])):E("",!0)]),_(de,{visible:a.value,"onUpdate:visible":l[9]||(l[9]=c=>a.value=c),title:"Layer Settings",width:"800px",class:"layer-settings-modal",footer:null},{default:v(()=>[t("div",At,[t("div",Nt,[(h(!0),b(H,null,j(e.value,(c,es)=>(h(),b("div",{key:c.filename,class:"layer-item"},[t("div",Bt,w(c.filename),1),t("div",Dt,[_(re,{value:c.type,"onUpdate:value":U=>c.type=U,style:{width:"120px"},onChange:ne},{default:v(()=>[_(F,{value:"drill"},{default:v(()=>[Gt]),_:1}),_(F,{value:"copper"},{default:v(()=>[Pt]),_:1}),_(F,{value:"silkscreen"},{default:v(()=>[Tt]),_:1}),_(F,{value:"soldermask"},{default:v(()=>[Wt]),_:1}),_(F,{value:"ignore"},{default:v(()=>[Ht]),_:1})]),_:2},1032,["value","onUpdate:value"]),c.type==="copper"||c.type==="soldermask"||c.type==="silkscreen"?(h(),b("div",jt,[_(O,{type:c.side==="top"?"primary":"default",size:"small",onClick:U=>N(c,"top")},{default:v(()=>[qt]),_:2},1032,["type","onClick"]),_(O,{type:c.side==="bottom"?"primary":"default",size:"small",onClick:U=>N(c,"bottom")},{default:v(()=>[Kt]),_:2},1032,["type","onClick"]),_(O,{type:c.side==="inner"?"primary":"default",size:"small",onClick:U=>N(c,"inner")},{default:v(()=>[Yt]),_:2},1032,["type","onClick"])])):E("",!0)])]))),128))]),t("div",Xt,[_(O,{onClick:ae},{default:v(()=>[Jt]),_:1}),_(O,{type:"primary",onClick:ie},{default:v(()=>[Qt]),_:1})])])]),_:1},8,["visible"])])}}});const Zt=se(Rt,[["__scopeId","data-v-d542581b"]]);window.process=me.exports;const oe=ye(Zt);oe.use(be);oe.mount("#app");
