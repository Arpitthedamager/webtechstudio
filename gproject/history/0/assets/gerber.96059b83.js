var t=Math.pow;import{c as e,g as r}from"./vendor.51c08223.js";var n=function(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var n in r)i.call(r,n)&&(t[n]=r[n])}return t}
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */,i=Object.prototype.hasOwnProperty;let o;var a=function(t,e){let r,n,i,o=!0;Array.isArray(t)?(r=[],n=t.length):(i=Object.keys(t),r={},n=i.length);function a(t){function n(){e&&e(t,r),e=null}o?s(n):n()}function u(t,e,i){r[t]=i,(0==--n||e)&&a(e)}n?i?i.forEach((function(e){t[e]((function(t,r){u(e,t,r)}))})):t.forEach((function(t,e){t((function(t,r){u(e,t,r)}))})):a(null);o=!1}
/*! run-waterfall. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */;
/*! run-parallel. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const s="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:e):t=>(o||(o=Promise.resolve())).then(t).catch((t=>setTimeout((()=>{throw t}),0)));var u=function(t,e){var r=0,n=!0;function i(t,r){function i(){r=r?[].concat(t,r):[t],e&&e.apply(void 0,r)}n?process.nextTick(i):i()}t.length?t[0]((function e(n){var o=Array.prototype.slice.call(arguments,1);++r>=t.length||n?i(n,o):t[r].apply(void 0,[].concat(o,e))})):i(null);n=!1};var l={exports:{}},c="_ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",f="-0123456789"+c,h=new RegExp("^[^"+c+"]|[^\\"+f+"]","g"),d={random:p,sanitize:g,ensure:function(t,e){return"string"==typeof t?g(t):p(e)}};function p(t){return t=t||12,_(1,c)+_(t-1,f)}function g(t){return t.replace(h,"_")}function _(t,e){for(var r=e.length,n="";t>0;)t--,n+=e[Math.floor(Math.random()*r)];return n}var y="object"==typeof e&&e&&e.Object===Object&&e,b="object"==typeof self&&self&&self.Object===Object&&self,m=(y||b||Function("return this")()).isFinite;for(var v=function(t){return"number"==typeof t&&m(t)},w={},E={exports:{}},A={},C={byteLength:function(t){var e=D(t),r=e[0],n=e[1];return 3*(r+n)/4-n},toByteArray:function(t){var e,r,n=D(t),i=n[0],o=n[1],a=new L(function(t,e,r){return 3*(e+r)/4-r}(0,i,o)),s=0,u=o>0?i-4:i;for(r=0;r<u;r+=4)e=k[t.charCodeAt(r)]<<18|k[t.charCodeAt(r+1)]<<12|k[t.charCodeAt(r+2)]<<6|k[t.charCodeAt(r+3)],a[s++]=e>>16&255,a[s++]=e>>8&255,a[s++]=255&e;2===o&&(e=k[t.charCodeAt(r)]<<2|k[t.charCodeAt(r+1)]>>4,a[s++]=255&e);1===o&&(e=k[t.charCodeAt(r)]<<10|k[t.charCodeAt(r+1)]<<4|k[t.charCodeAt(r+2)]>>2,a[s++]=e>>8&255,a[s++]=255&e);return a},fromByteArray:function(t){for(var e,r=t.length,n=r%3,i=[],o=16383,a=0,s=r-n;a<s;a+=o)i.push(O(t,a,a+o>s?s:a+o));1===n?(e=t[r-1],i.push(x[e>>2]+x[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],i.push(x[e>>10]+x[e>>4&63]+x[e<<2&63]+"="));return i.join("")}},x=[],k=[],L="undefined"!=typeof Uint8Array?Uint8Array:Array,S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",R=0;R<64;++R)x[R]=S[R],k[S.charCodeAt(R)]=R;function D(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function O(t,e,r){for(var n,i,o=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(x[(i=n)>>18&63]+x[i>>12&63]+x[i>>6&63]+x[63&i]);return o.join("")}k["-".charCodeAt(0)]=62,k["_".charCodeAt(0)]=63;var T={
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
read:function(t,e,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,l=u>>1,c=-7,f=r?i-1:0,h=r?-1:1,d=t[e+f];for(f+=h,o=d&(1<<-c)-1,d>>=-c,c+=s;c>0;o=256*o+t[e+f],f+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+t[e+f],f+=h,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),o-=l}return(d?-1:1)*a*Math.pow(2,o-n)},write:function(t,e,r,n,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,f=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[r+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[r+d]=255&a,d+=p,a/=256,l-=8);t[r+d-p]|=128*g}};
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
(function(e){const r=C,n=T,i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=s,e.SlowBuffer=function(t){+t!=t&&(t=0);return s.alloc(+t)},e.INSPECT_MAX_BYTES=50;const o=2147483647;function a(t){if(t>o)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,s.prototype),e}function s(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return c(t)}return u(t,e,r)}function u(t,e,r){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!s.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|p(t,e);let n=a(r);const i=n.write(t,e);i!==r&&(n=n.slice(0,i));return n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(X(t,Uint8Array)){const e=new Uint8Array(t);return h(e.buffer,e.byteOffset,e.byteLength)}return f(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(X(t,ArrayBuffer)||t&&X(t.buffer,ArrayBuffer))return h(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(X(t,SharedArrayBuffer)||t&&X(t.buffer,SharedArrayBuffer)))return h(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return s.from(n,e,r);const i=function(t){if(s.isBuffer(t)){const e=0|d(t.length),r=a(e);return 0===r.length||t.copy(r,0,0,e),r}if(void 0!==t.length)return"number"!=typeof t.length||Z(t.length)?a(0):f(t);if("Buffer"===t.type&&Array.isArray(t.data))return f(t.data)}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return s.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function c(t){return l(t),a(t<0?0:0|d(t))}function f(t){const e=t.length<0?0:0|d(t.length),r=a(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function h(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,s.prototype),n}function d(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function p(t,e){if(s.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||X(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return W(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return H(t).length;default:if(i)return n?-1:W(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return D(this,e,r);case"utf8":case"utf-8":return k(this,e,r);case"ascii":return S(this,e,r);case"latin1":case"binary":return R(this,e,r);case"base64":return x(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function _(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function y(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Z(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=s.from(e,n)),s.isBuffer(e))return 0===e.length?-1:b(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):b(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,r,n,i){let o,a=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,r/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){let n=-1;for(o=r;o<s;o++)if(l(t,o)===l(e,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*a}else-1!==n&&(o-=o-n),n=-1}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(l(t,o+n)!==l(e,n)){r=!1;break}if(r)return o}return-1}function m(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=e.length;let a;for(n>o/2&&(n=o/2),a=0;a<n;++a){const n=parseInt(e.substr(2*a,2),16);if(Z(n))return a;t[r+a]=n}return a}function v(t,e,r,n){return V(W(e,t.length-r),t,r,n)}function w(t,e,r,n){return V(function(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function E(t,e,r,n){return V(H(e),t,r,n)}function A(t,e,r,n){return V(function(t,e){let r,n,i;const o=[];for(let a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function x(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function k(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;for(;i<r;){const e=t[i];let o=null,a=e>239?4:e>223?3:e>191?2:1;if(i+a<=r){let r,n,s,u;switch(a){case 1:e<128&&(o=e);break;case 2:r=t[i+1],128==(192&r)&&(u=(31&e)<<6|63&r,u>127&&(o=u));break;case 3:r=t[i+1],n=t[i+2],128==(192&r)&&128==(192&n)&&(u=(15&e)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=t[i+1],n=t[i+2],s=t[i+3],128==(192&r)&&128==(192&n)&&128==(192&s)&&(u=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&s,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=a}return function(t){const e=t.length;if(e<=L)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=L));return r}(n)}e.kMaxLength=o,s.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(t,e,r){return u(t,e,r)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(t,e,r){return function(t,e,r){return l(t),t<=0?a(t):void 0!==e?"string"==typeof r?a(t).fill(e,r):a(t).fill(e):a(t)}(t,e,r)},s.allocUnsafe=function(t){return c(t)},s.allocUnsafeSlow=function(t){return c(t)},s.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==s.prototype},s.compare=function(t,e){if(X(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),X(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=s.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(X(e,Uint8Array))i+e.length>n.length?(s.isBuffer(e)||(e=s.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!s.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,i)}i+=e.length}return n},s.byteLength=p,s.prototype._isBuffer=!0,s.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)_(this,e,e+1);return this},s.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)_(this,e,e+3),_(this,e+1,e+2);return this},s.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)_(this,e,e+7),_(this,e+1,e+6),_(this,e+2,e+5),_(this,e+3,e+4);return this},s.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?k(this,0,t):g.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},i&&(s.prototype[i]=s.prototype.inspect),s.prototype.compare=function(t,e,r,n,i){if(X(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;let o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0);const u=Math.min(o,a),l=this.slice(n,i),c=t.slice(e,r);for(let s=0;s<u;++s)if(l[s]!==c[s]){o=l[s],a=c[s];break}return o<a?-1:a<o?1:0},s.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},s.prototype.indexOf=function(t,e,r){return y(this,t,e,r,!0)},s.prototype.lastIndexOf=function(t,e,r){return y(this,t,e,r,!1)},s.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return m(this,t,e,r);case"utf8":case"utf-8":return v(this,t,e,r);case"ascii":case"latin1":case"binary":return w(this,t,e,r);case"base64":return E(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const L=4096;function S(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function R(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function D(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let o=e;o<r;++o)i+=J[t[o]];return i}function O(t,e,r){const n=t.slice(e,r);let i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function I(t,e,r,n,i,o){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function P(t,e,r,n,i){$(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=a,a>>=8,t[r++]=a,a>>=8,t[r++]=a,a>>=8,t[r++]=a,r}function B(t,e,r,n,i){$(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o>>=8,t[r+6]=o,o>>=8,t[r+5]=o,o>>=8,t[r+4]=o;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=a,a>>=8,t[r+2]=a,a>>=8,t[r+1]=a,a>>=8,t[r]=a,r+8}function N(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function j(t,e,r,i,o){return e=+e,r>>>=0,o||N(t,0,r,4),n.write(t,e,r,i,23,4),r+4}function G(t,e,r,i,o){return e=+e,r>>>=0,o||N(t,0,r,8),n.write(t,e,r,i,52,8),r+8}s.prototype.slice=function(t,e){const r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,s.prototype),n},s.prototype.readUintLE=s.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||M(t,e,this.length);let n=this[t],i=1,o=0;for(;++o<e&&(i*=256);)n+=this[t+o]*i;return n},s.prototype.readUintBE=s.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||M(t,e,this.length);let n=this[t+--e],i=1;for(;e>0&&(i*=256);)n+=this[t+--e]*i;return n},s.prototype.readUint8=s.prototype.readUInt8=function(t,e){return t>>>=0,e||M(t,1,this.length),this[t]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(t,e){return t>>>=0,e||M(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(t,e){return t>>>=0,e||M(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(t,e){return t>>>=0,e||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(t,e){return t>>>=0,e||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readBigUInt64LE=Q((function(e){z(e>>>=0,"offset");const r=this[e],n=this[e+7];void 0!==r&&void 0!==n||q(e,this.length-8);const i=r+this[++e]*t(2,8)+this[++e]*t(2,16)+this[++e]*t(2,24),o=this[++e]+this[++e]*t(2,8)+this[++e]*t(2,16)+n*t(2,24);return BigInt(i)+(BigInt(o)<<BigInt(32))})),s.prototype.readBigUInt64BE=Q((function(e){z(e>>>=0,"offset");const r=this[e],n=this[e+7];void 0!==r&&void 0!==n||q(e,this.length-8);const i=r*t(2,24)+this[++e]*t(2,16)+this[++e]*t(2,8)+this[++e],o=this[++e]*t(2,24)+this[++e]*t(2,16)+this[++e]*t(2,8)+n;return(BigInt(i)<<BigInt(32))+BigInt(o)})),s.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||M(t,e,this.length);let n=this[t],i=1,o=0;for(;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},s.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||M(t,e,this.length);let n=e,i=1,o=this[t+--n];for(;n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},s.prototype.readInt8=function(t,e){return t>>>=0,e||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){t>>>=0,e||M(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt16BE=function(t,e){t>>>=0,e||M(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt32LE=function(t,e){return t>>>=0,e||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return t>>>=0,e||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readBigInt64LE=Q((function(e){z(e>>>=0,"offset");const r=this[e],n=this[e+7];void 0!==r&&void 0!==n||q(e,this.length-8);const i=this[e+4]+this[e+5]*t(2,8)+this[e+6]*t(2,16)+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++e]*t(2,8)+this[++e]*t(2,16)+this[++e]*t(2,24))})),s.prototype.readBigInt64BE=Q((function(e){z(e>>>=0,"offset");const r=this[e],n=this[e+7];void 0!==r&&void 0!==n||q(e,this.length-8);const i=(r<<24)+this[++e]*t(2,16)+this[++e]*t(2,8)+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*t(2,24)+this[++e]*t(2,16)+this[++e]*t(2,8)+n)})),s.prototype.readFloatLE=function(t,e){return t>>>=0,e||M(t,4,this.length),n.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return t>>>=0,e||M(t,4,this.length),n.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return t>>>=0,e||M(t,8,this.length),n.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return t>>>=0,e||M(t,8,this.length),n.read(this,t,!1,52,8)},s.prototype.writeUintLE=s.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){I(this,t,e,r,Math.pow(2,8*r)-1,0)}let i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){I(this,t,e,r,Math.pow(2,8*r)-1,0)}let i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},s.prototype.writeUint8=s.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||I(this,t,e,1,255,0),this[e]=255&t,e+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||I(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||I(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||I(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||I(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeBigUInt64LE=Q((function(t,e=0){return P(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),s.prototype.writeBigUInt64BE=Q((function(t,e=0){return B(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),s.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);I(this,t,e,r,n-1,-n)}let i=0,o=1,a=0;for(this[e]=255&t;++i<r&&(o*=256);)t<0&&0===a&&0!==this[e+i-1]&&(a=1),this[e+i]=(t/o|0)-a&255;return e+r},s.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);I(this,t,e,r,n-1,-n)}let i=r-1,o=1,a=0;for(this[e+i]=255&t;--i>=0&&(o*=256);)t<0&&0===a&&0!==this[e+i+1]&&(a=1),this[e+i]=(t/o|0)-a&255;return e+r},s.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||I(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||I(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||I(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||I(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},s.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||I(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeBigInt64LE=Q((function(t,e=0){return P(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),s.prototype.writeBigInt64BE=Q((function(t,e=0){return B(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),s.prototype.writeFloatLE=function(t,e,r){return j(this,t,e,!0,r)},s.prototype.writeFloatBE=function(t,e,r){return j(this,t,e,!1,r)},s.prototype.writeDoubleLE=function(t,e,r){return G(this,t,e,!0,r)},s.prototype.writeDoubleBE=function(t,e,r){return G(this,t,e,!1,r)},s.prototype.copy=function(t,e,r,n){if(!s.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},s.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!s.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{const o=s.isBuffer(t)?t:s.from(t,n),a=o.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=o[i%a]}return this};const U={};function Y(t,e,r){U[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function F(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function $(t,e,r,n,i,o){if(t>r||t<e){const n="bigint"==typeof e?"n":"";let i;throw i=o>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new U.ERR_OUT_OF_RANGE("value",i,t)}!function(t,e,r){z(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||q(e,t.length-(r+1))}(n,i,o)}function z(t,e){if("number"!=typeof t)throw new U.ERR_INVALID_ARG_TYPE(e,"number",t)}function q(t,e,r){if(Math.floor(t)!==t)throw z(t,r),new U.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new U.ERR_BUFFER_OUT_OF_BOUNDS;throw new U.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}Y("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),Y("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),Y("ERR_OUT_OF_RANGE",(function(e,r,n){let i=`The value of "${e}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>t(2,32)?o=F(String(n)):"bigint"==typeof n&&(o=String(n),(n>t(BigInt(2),BigInt(32))||n<-t(BigInt(2),BigInt(32)))&&(o=F(o)),o+="n"),i+=` It must be ${r}. Received ${o}`,i}),RangeError);const K=/[^+/0-9A-Za-z-_]/g;function W(t,e){let r;e=e||1/0;const n=t.length;let i=null;const o=[];for(let a=0;a<n;++a){if(r=t.charCodeAt(a),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function H(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(K,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function V(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function X(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Z(t){return t!=t}const J=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function Q(t){return"undefined"==typeof BigInt?tt:t}function tt(){throw new Error("BigInt not supported")}})(A),
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
function(t,e){var r=A,n=r.Buffer;function i(t,e){for(var r in t)e[r]=t[r]}function o(t,e,r){return n(t,e,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=o),o.prototype=Object.create(n.prototype),i(n,o),o.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,r)},o.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=n(t);return void 0!==e?"string"==typeof r?i.fill(e,r):i.fill(e):i.fill(0),i},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}}(E,E.exports);var M=E.exports.Buffer,I=M.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function P(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(M.isEncoding===I||!I(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=j,this.end=G,e=4;break;case"utf8":this.fillLast=N,e=4;break;case"base64":this.text=U,this.end=Y,e=3;break;default:return this.write=F,void(this.end=$)}this.lastNeed=0,this.lastTotal=0,this.lastChar=M.allocUnsafe(e)}function B(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function N(t){var e=this.lastTotal-this.lastNeed,r=function(t,e){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function j(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function G(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function U(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function Y(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function F(t){return t.toString(this.encoding)}function $(t){return t&&t.length?this.write(t):""}w.StringDecoder=P,P.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},P.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},P.prototype.text=function(t,e){var r=function(t,e,r){var n=e.length-1;if(n<r)return 0;var i=B(e[n]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if(i=B(e[n]),i>=0)return i>0&&(t.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if(i=B(e[n]),i>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},P.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};var z={exports:{}};"function"==typeof Object.create?z.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:z.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}};var q,K={exports:{}},W={exports:{}},H="object"==typeof Reflect?Reflect:null,V=H&&"function"==typeof H.apply?H.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};q=H&&"function"==typeof H.ownKeys?H.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var X=Number.isNaN||function(t){return t!=t};function Z(){Z.init.call(this)}W.exports=Z,W.exports.once=function(t,e){return new Promise((function(r,n){function i(r){t.removeListener(e,o),n(r)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),r([].slice.call(arguments))}st(t,e,o,{once:!0}),"error"!==e&&function(t,e,r){"function"==typeof t.on&&st(t,"error",e,r)}(t,i,{once:!0})}))},Z.EventEmitter=Z,Z.prototype._events=void 0,Z.prototype._eventsCount=0,Z.prototype._maxListeners=void 0;var J=10;function Q(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function tt(t){return void 0===t._maxListeners?Z.defaultMaxListeners:t._maxListeners}function et(t,e,r,n){var i,o,a,s;if(Q(r),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),a=o[e]),void 0===a)a=o[e]=r,++t._eventsCount;else if("function"==typeof a?a=o[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=tt(t))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return t}function rt(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function nt(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=rt.bind(n);return i.listener=r,n.wrapFn=i,i}function it(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):at(i,i.length)}function ot(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function at(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function st(t,e,r,n){if("function"==typeof t.on)n.once?t.once(e,r):t.on(e,r);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){n.once&&t.removeEventListener(e,i),r(o)}))}}Object.defineProperty(Z,"defaultMaxListeners",{enumerable:!0,get:function(){return J},set:function(t){if("number"!=typeof t||t<0||X(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");J=t}}),Z.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Z.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||X(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},Z.prototype.getMaxListeners=function(){return tt(this)},Z.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var s=i[t];if(void 0===s)return!1;if("function"==typeof s)V(s,this,e);else{var u=s.length,l=at(s,u);for(r=0;r<u;++r)V(l[r],this,e)}return!0},Z.prototype.addListener=function(t,e){return et(this,t,e,!1)},Z.prototype.on=Z.prototype.addListener,Z.prototype.prependListener=function(t,e){return et(this,t,e,!0)},Z.prototype.once=function(t,e){return Q(e),this.on(t,nt(this,t,e)),this},Z.prototype.prependOnceListener=function(t,e){return Q(e),this.prependListener(t,nt(this,t,e)),this},Z.prototype.removeListener=function(t,e){var r,n,i,o,a;if(Q(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===e||r[o].listener===e){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,a||e)}return this},Z.prototype.off=Z.prototype.removeListener,Z.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},Z.prototype.listeners=function(t){return it(this,t,!0)},Z.prototype.rawListeners=function(t){return it(this,t,!1)},Z.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):ot.call(t,e)},Z.prototype.listenerCount=ot,Z.prototype.eventNames=function(){return this._eventsCount>0?q(this._events):[]};var ut=W.exports.EventEmitter;const lt=r(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var ct,ft;function ht(){if(ft)return ct;function t(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function e(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}ft=1;var n=A.Buffer,i=lt.inspect,o=i&&i.custom||"inspect";return ct=function(){function a(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.head=null,this.tail=null,this.length=0}var s,u,l;return s=a,u=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r}},{key:"concat",value:function(t){if(0===this.length)return n.alloc(0);for(var e,r,i,o=n.allocUnsafe(t>>>0),a=this.head,s=0;a;)e=a.data,r=o,i=s,n.prototype.copy.call(e,r,i),s+=a.data.length,a=a.next;return o}},{key:"consume",value:function(t,e){var r;return t<this.head.data.length?(r=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):r=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,r=1,n=e.data;for(t-=n.length;e=e.next;){var i=e.data,o=t>i.length?i.length:t;if(o===i.length?n+=i:n+=i.slice(0,t),0==(t-=o)){o===i.length?(++r,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(t){var e=n.allocUnsafe(t),r=this.head,i=1;for(r.data.copy(e),t-=r.data.length;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(o.copy(e,e.length-t,0,a),0==(t-=a)){a===o.length?(++i,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=o.slice(a));break}++i}return this.length-=i,e}},{key:o,value:function(r,n){return i(this,function(r){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(Object(i),!0).forEach((function(t){e(r,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(i,t))}))}return r}({},n,{depth:0,customInspect:!1}))}}],u&&r(s.prototype,u),l&&r(s,l),a}(),ct}function dt(t,e){gt(t,e),pt(t)}function pt(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function gt(t,e){t.emit("error",e)}var _t={destroy:function(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(gt,this,t)):process.nextTick(gt,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?r._writableState?r._writableState.errorEmitted?process.nextTick(pt,r):(r._writableState.errorEmitted=!0,process.nextTick(dt,r,t)):process.nextTick(dt,r,t):e?(process.nextTick(pt,r),e(t)):process.nextTick(pt,r)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}},yt={};var bt={};function mt(t,e,r){r||(r=Error);var n=function(t){var r,n;function i(r,n,i){return t.call(this,function(t,r,n){return"string"==typeof e?e:e(t,r,n)}(r,n,i))||this}return n=t,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(r);n.prototype.name=r.name,n.prototype.code=t,bt[t]=n}function vt(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map((function(t){return String(t)})),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:2===r?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}mt("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),mt("ERR_INVALID_ARG_TYPE",(function(t,e,r){var n,i,o,a;if("string"==typeof e&&(i="not ",e.substr(!o||o<0?0:+o,i.length)===i)?(n="must not be",e=e.replace(/^not /,"")):n="must be",function(t,e,r){return(void 0===r||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}(t," argument"))a="The ".concat(t," ").concat(n," ").concat(vt(e,"type"));else{var s=function(t,e,r){return"number"!=typeof r&&(r=0),!(r+e.length>t.length)&&-1!==t.indexOf(e,r)}(t,".")?"property":"argument";a='The "'.concat(t,'" ').concat(s," ").concat(n," ").concat(vt(e,"type"))}return a+=". Received type ".concat(typeof r)}),TypeError),mt("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),mt("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),mt("ERR_STREAM_PREMATURE_CLOSE","Premature close"),mt("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),mt("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),mt("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),mt("ERR_STREAM_WRITE_AFTER_END","write after end"),mt("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),mt("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),mt("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),yt.codes=bt;var wt=yt.codes.ERR_INVALID_OPT_VALUE;var Et,At,Ct,xt,kt={getHighWaterMark:function(t,e,r,n){var i=function(t,e,r){return null!=t.highWaterMark?t.highWaterMark:e?t[r]:null}(e,n,r);if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new wt(n?r:"highWaterMark",i);return Math.floor(i)}return t.objectMode?16:16384}},Lt=function(t,e){if(St("noDeprecation"))return t;var r=!1;return function(){if(!r){if(St("throwDeprecation"))throw new Error(e);St("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}};function St(t){try{if(!e.localStorage)return!1}catch(n){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}function Rt(){if(At)return Et;function t(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,r){var n=t.entry;t.entry=null;for(;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}(e,t)}}var e;At=1,Et=w,w.WritableState=v;var r={deprecate:Lt},n=ut,i=A.Buffer,o=function(){};var a,s=_t,u=kt.getHighWaterMark,l=yt.codes,c=l.ERR_INVALID_ARG_TYPE,f=l.ERR_METHOD_NOT_IMPLEMENTED,h=l.ERR_MULTIPLE_CALLBACK,d=l.ERR_STREAM_CANNOT_PIPE,p=l.ERR_STREAM_DESTROYED,g=l.ERR_STREAM_NULL_VALUES,_=l.ERR_STREAM_WRITE_AFTER_END,y=l.ERR_UNKNOWN_ENCODING,b=s.errorOrDestroy;function m(){}function v(r,n,i){e=e||Dt(),r=r||{},"boolean"!=typeof i&&(i=n instanceof e),this.objectMode=!!r.objectMode,i&&(this.objectMode=this.objectMode||!!r.writableObjectMode),this.highWaterMark=u(this,r,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===r.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if("function"!=typeof i)throw new h;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),e)!function(t,e,r,n,i){--e.pendingcb,r?(process.nextTick(i,n),process.nextTick(S,t,e),t._writableState.errorEmitted=!0,b(t,n)):(i(n),t._writableState.errorEmitted=!0,b(t,n),S(t,e))}(t,r,n,e,i);else{var o=k(r)||t.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||x(t,r),n?process.nextTick(C,t,r,o,i):C(t,r,o,i)}}(n,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==r.emitClose,this.autoDestroy=!!r.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}function w(t){var r=this instanceof(e=e||Dt());if(!r&&!a.call(w,this))return new w(t);this._writableState=new v(t,this,r),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),n.call(this)}function E(t,e,r,n,i,o,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new p("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function C(t,e,r,n){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),S(t,e)}function x(e,r){r.bufferProcessing=!0;var n=r.bufferedRequest;if(e._writev&&n&&n.next){var i=r.bufferedRequestCount,o=new Array(i),a=r.corkedRequestsFree;a.entry=n;for(var s=0,u=!0;n;)o[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;o.allBuffers=u,E(e,r,!0,r.length,o,"",a.finish),r.pendingcb++,r.lastBufferedRequest=null,a.next?(r.corkedRequestsFree=a.next,a.next=null):r.corkedRequestsFree=new t(r),r.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,f=n.callback;if(E(e,r,!1,r.objectMode?1:l.length,l,c,f),n=n.next,r.bufferedRequestCount--,r.writing)break}null===n&&(r.lastBufferedRequest=null)}r.bufferedRequest=n,r.bufferProcessing=!1}function k(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function L(t,e){t._final((function(r){e.pendingcb--,r&&b(t,r),e.prefinished=!0,t.emit("prefinish"),S(t,e)}))}function S(t,e){var r=k(e);if(r&&(function(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,process.nextTick(L,t,e)))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}return z.exports(w,n),v.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(v.prototype,"buffer",{get:r.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(a=Function.prototype[Symbol.hasInstance],Object.defineProperty(w,Symbol.hasInstance,{value:function(t){return!!a.call(this,t)||this===w&&(t&&t._writableState instanceof v)}})):a=function(t){return t instanceof this},w.prototype.pipe=function(){b(this,new d)},w.prototype.write=function(t,e,r){var n,a=this._writableState,s=!1,u=!a.objectMode&&(n=t,i.isBuffer(n)||n instanceof o);return u&&!i.isBuffer(t)&&(t=function(t){return i.from(t)}(t)),"function"==typeof e&&(r=e,e=null),u?e="buffer":e||(e=a.defaultEncoding),"function"!=typeof r&&(r=m),a.ending?function(t,e){var r=new _;b(t,r),process.nextTick(e,r)}(this,r):(u||function(t,e,r,n){var i;return null===r?i=new g:"string"==typeof r||e.objectMode||(i=new c("chunk",["string","Buffer"],r)),!i||(b(t,i),process.nextTick(n,i),!1)}(this,a,t,r))&&(a.pendingcb++,s=function(t,e,r,n,o,a){if(!r){var s=function(t,e,r){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=i.from(e,r));return e}(e,n,o);n!==s&&(r=!0,o="buffer",n=s)}var u=e.objectMode?1:n.length;e.length+=u;var l=e.length<e.highWaterMark;l||(e.needDrain=!0);if(e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:o,isBuf:r,callback:a,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else E(t,e,!1,u,n,o,a);return l}(this,a,u,t,e,r)),s},w.prototype.cork=function(){this._writableState.corked++},w.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||x(this,t))},w.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new y(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(w.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),w.prototype._write=function(t,e,r){r(new f("_write()"))},w.prototype._writev=null,w.prototype.end=function(t,e,r){var n=this._writableState;return"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||function(t,e,r){e.ending=!0,S(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r));e.ended=!0,t.writable=!1}(this,n,r),this},Object.defineProperty(w.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),w.prototype.destroy=s.destroy,w.prototype._undestroy=s.undestroy,w.prototype._destroy=function(t,e){e(t)},Et}function Dt(){if(xt)return Ct;xt=1;var t=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};Ct=a;var e=Yt(),r=Rt();z.exports(a,e);for(var n=t(r.prototype),i=0;i<n.length;i++){var o=n[i];a.prototype[o]||(a.prototype[o]=r.prototype[o])}function a(t){if(!(this instanceof a))return new a(t);e.call(this,t),r.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",s)))}function s(){this._writableState.ended||process.nextTick(u,this)}function u(t){t.end()}return Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),Ct}var Ot=yt.codes.ERR_STREAM_PREMATURE_CLOSE;function Tt(){}var Mt,It,Pt,Bt,Nt,jt,Gt=function t(e,r,n){if("function"==typeof r)return t(e,null,r);r||(r={}),n=function(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}(n||Tt);var i=r.readable||!1!==r.readable&&e.readable,o=r.writable||!1!==r.writable&&e.writable,a=function(){e.writable||u()},s=e._writableState&&e._writableState.finished,u=function(){o=!1,s=!0,i||n.call(e)},l=e._readableState&&e._readableState.endEmitted,c=function(){i=!1,l=!0,o||n.call(e)},f=function(t){n.call(e,t)},h=function(){var t;return i&&!l?(e._readableState&&e._readableState.ended||(t=new Ot),n.call(e,t)):o&&!s?(e._writableState&&e._writableState.ended||(t=new Ot),n.call(e,t)):void 0},d=function(){e.req.on("finish",u)};return!function(t){return t.setHeader&&"function"==typeof t.abort}(e)?o&&!e._writableState&&(e.on("end",a),e.on("close",a)):(e.on("complete",u),e.on("abort",h),e.req?d():e.on("request",d)),e.on("end",c),e.on("finish",u),!1!==r.error&&e.on("error",f),e.on("close",h),function(){e.removeListener("complete",u),e.removeListener("abort",h),e.removeListener("request",d),e.req&&e.req.removeListener("finish",u),e.removeListener("end",a),e.removeListener("close",a),e.removeListener("finish",u),e.removeListener("end",c),e.removeListener("error",f),e.removeListener("close",h)}};function Ut(){if(It)return Mt;var t;function e(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}It=1;var r=Gt,n=Symbol("lastResolve"),i=Symbol("lastReject"),o=Symbol("error"),a=Symbol("ended"),s=Symbol("lastPromise"),u=Symbol("handlePromise"),l=Symbol("stream");function c(t,e){return{value:t,done:e}}function f(t){var e=t[n];if(null!==e){var r=t[l].read();null!==r&&(t[s]=null,t[n]=null,t[i]=null,e(c(r,!1)))}}function h(t){process.nextTick(f,t)}var d=Object.getPrototypeOf((function(){})),p=Object.setPrototypeOf((e(t={get stream(){return this[l]},next:function(){var t=this,e=this[o];if(null!==e)return Promise.reject(e);if(this[a])return Promise.resolve(c(void 0,!0));if(this[l].destroyed)return new Promise((function(e,r){process.nextTick((function(){t[o]?r(t[o]):e(c(void 0,!0))}))}));var r,n=this[s];if(n)r=new Promise(function(t,e){return function(r,n){t.then((function(){e[a]?r(c(void 0,!0)):e[u](r,n)}),n)}}(n,this));else{var i=this[l].read();if(null!==i)return Promise.resolve(c(i,!1));r=new Promise(this[u])}return this[s]=r,r}},Symbol.asyncIterator,(function(){return this})),e(t,"return",(function(){var t=this;return new Promise((function(e,r){t[l].destroy(null,(function(t){t?r(t):e(c(void 0,!0))}))}))})),t),d);return Mt=function(t){var f,d=Object.create(p,(e(f={},l,{value:t,writable:!0}),e(f,n,{value:null,writable:!0}),e(f,i,{value:null,writable:!0}),e(f,o,{value:null,writable:!0}),e(f,a,{value:t._readableState.endEmitted,writable:!0}),e(f,u,{value:function(t,e){var r=d[l].read();r?(d[s]=null,d[n]=null,d[i]=null,t(c(r,!1))):(d[n]=t,d[i]=e)},writable:!0}),f));return d[s]=null,r(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=d[i];return null!==e&&(d[s]=null,d[n]=null,d[i]=null,e(t)),void(d[o]=t)}var r=d[n];null!==r&&(d[s]=null,d[n]=null,d[i]=null,r(c(void 0,!0))),d[a]=!0})),t.on("readable",h.bind(null,d)),d}}function Yt(){if(jt)return Nt;var t;jt=1,Nt=E,E.ReadableState=v,W.exports.EventEmitter;var e=function(t,e){return t.listeners(e).length},r=ut,n=A.Buffer,i=function(){};var o,a=lt;o=a&&a.debuglog?a.debuglog("stream"):function(){};var s,u,l,c=ht(),f=_t,h=kt.getHighWaterMark,d=yt.codes,p=d.ERR_INVALID_ARG_TYPE,g=d.ERR_STREAM_PUSH_AFTER_EOF,_=d.ERR_METHOD_NOT_IMPLEMENTED,y=d.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;z.exports(E,r);var b=f.errorOrDestroy,m=["error","close","destroy","pause","resume"];function v(e,r,n){t=t||Dt(),e=e||{},"boolean"!=typeof n&&(n=r instanceof t),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=h(this,e,"readableHighWaterMark",n),this.buffer=new c,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(s||(s=w.StringDecoder),this.decoder=new s(e.encoding),this.encoding=e.encoding)}function E(e){if(t=t||Dt(),!(this instanceof E))return new E(e);var n=this instanceof t;this._readableState=new v(e,this,n),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),r.call(this)}function C(t,e,r,a,s){o("readableAddChunk",e);var u,l=t._readableState;if(null===e)l.reading=!1,function(t,e){if(o("onEofChunk"),e.ended)return;if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?S(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,R(t)))}(t,l);else if(s||(u=function(t,e){var r;o=e,n.isBuffer(o)||o instanceof i||"string"==typeof e||void 0===e||t.objectMode||(r=new p("chunk",["string","Buffer","Uint8Array"],e));var o;return r}(l,e)),u)b(t,u);else if(l.objectMode||e&&e.length>0)if("string"==typeof e||l.objectMode||Object.getPrototypeOf(e)===n.prototype||(e=function(t){return n.from(t)}(e)),a)l.endEmitted?b(t,new y):x(t,l,e,!0);else if(l.ended)b(t,new g);else{if(l.destroyed)return!1;l.reading=!1,l.decoder&&!r?(e=l.decoder.write(e),l.objectMode||0!==e.length?x(t,l,e,!1):D(t,l)):x(t,l,e,!1)}else a||(l.reading=!1,D(t,l));return!l.ended&&(l.length<l.highWaterMark||0===l.length)}function x(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&S(t)),D(t,e)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),E.prototype.destroy=f.destroy,E.prototype._undestroy=f.undestroy,E.prototype._destroy=function(t,e){e(t)},E.prototype.push=function(t,e){var r,i=this._readableState;return i.objectMode?r=!0:"string"==typeof t&&((e=e||i.defaultEncoding)!==i.encoding&&(t=n.from(t,e),e=""),r=!0),C(this,t,e,!1,r)},E.prototype.unshift=function(t){return C(this,t,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(t){s||(s=w.StringDecoder);var e=new s(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";null!==r;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var k=1073741824;function L(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=k?t=k:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function S(t){var e=t._readableState;o("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(o("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(R,t))}function R(t){var e=t._readableState;o("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,P(t)}function D(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(O,t,e))}function O(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var r=e.length;if(o("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}function T(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function M(t){o("readable nexttick read 0"),t.read(0)}function I(t,e){o("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),P(t),e.flowing&&!e.reading&&t.read(0)}function P(t){var e=t._readableState;for(o("flow",e.flowing);e.flowing&&null!==t.read(););}function B(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r);var r}function N(t){var e=t._readableState;o("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(j,e,t))}function j(t,e){if(o("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}function G(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}return E.prototype.read=function(t){o("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return o("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?N(this):S(this),null;if(0===(t=L(t,e))&&e.ended)return 0===e.length&&N(this),null;var n,i=e.needReadable;return o("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&o("length less than watermark",i=!0),e.ended||e.reading?o("reading or ended",i=!1):i&&(o("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=L(r,e))),null===(n=t>0?B(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&N(this)),null!==n&&this.emit("data",n),n},E.prototype._read=function(t){b(this,new _("_read()"))},E.prototype.pipe=function(t,r){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t)}i.pipesCount+=1,o("pipe count=%d opts=%j",i.pipesCount,r);var a=(!r||!1!==r.end)&&t!==process.stdout&&t!==process.stderr?u:g;function s(e,r){o("onunpipe"),e===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,o("cleanup"),t.removeListener("close",d),t.removeListener("finish",p),t.removeListener("drain",l),t.removeListener("error",h),t.removeListener("unpipe",s),n.removeListener("end",u),n.removeListener("end",g),n.removeListener("data",f),c=!0,!i.awaitDrain||t._writableState&&!t._writableState.needDrain||l())}function u(){o("onend"),t.end()}i.endEmitted?process.nextTick(a):n.once("end",a),t.on("unpipe",s);var l=function(t){return function(){var r=t._readableState;o("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,0===r.awaitDrain&&e(t,"data")&&(r.flowing=!0,P(t))}}(n);t.on("drain",l);var c=!1;function f(e){o("ondata");var r=t.write(e);o("dest.write",r),!1===r&&((1===i.pipesCount&&i.pipes===t||i.pipesCount>1&&-1!==G(i.pipes,t))&&!c&&(o("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function h(r){o("onerror",r),g(),t.removeListener("error",h),0===e(t,"error")&&b(t,r)}function d(){t.removeListener("finish",p),g()}function p(){o("onfinish"),t.removeListener("close",d),g()}function g(){o("unpipe"),n.unpipe(t)}return n.on("data",f),function(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}(t,"error",h),t.once("close",d),t.once("finish",p),t.emit("pipe",n),i.flowing||(o("pipe resume"),n.resume()),t},E.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r)),this;if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=G(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r)),this},E.prototype.on=function(t,e){var n=r.prototype.on.call(this,t,e),i=this._readableState;return"data"===t?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===t&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,o("on readable",i.length,i.reading),i.length?S(this):i.reading||process.nextTick(M,this))),n},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(t,e){var n=r.prototype.removeListener.call(this,t,e);return"readable"===t&&process.nextTick(T,this),n},E.prototype.removeAllListeners=function(t){var e=r.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||process.nextTick(T,this),e},E.prototype.resume=function(){var t=this._readableState;return t.flowing||(o("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(I,t,e))}(this,t)),t.paused=!1,this},E.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var i in t.on("end",(function(){if(o("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){(o("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(e.push(i)||(n=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var a=0;a<m.length;a++)t.on(m[a],this.emit.bind(this,m[a]));return this._read=function(e){o("wrapped _read",e),n&&(n=!1,t.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return void 0===u&&(u=Ut()),u(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),E._fromList=B,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(t,e){return void 0===l&&(l=Bt?Pt:(Bt=1,Pt=function(){throw new Error("Readable.from is not available in the browser")})),l(E,t,e)}),Nt}var Ft=Xt,$t=yt.codes,zt=$t.ERR_METHOD_NOT_IMPLEMENTED,qt=$t.ERR_MULTIPLE_CALLBACK,Kt=$t.ERR_TRANSFORM_ALREADY_TRANSFORMING,Wt=$t.ERR_TRANSFORM_WITH_LENGTH_0,Ht=Dt();function Vt(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new qt);r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Xt(t){if(!(this instanceof Xt))return new Xt(t);Ht.call(this,t),this._transformState={afterTransform:Vt.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",Zt)}function Zt(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?Jt(this,null,null):this._flush((function(e,r){Jt(t,e,r)}))}function Jt(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new Wt;if(t._transformState.transforming)throw new Kt;return t.push(null)}z.exports(Xt,Ht),Xt.prototype.push=function(t,e){return this._transformState.needTransform=!1,Ht.prototype.push.call(this,t,e)},Xt.prototype._transform=function(t,e,r){r(new zt("_transform()"))},Xt.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},Xt.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},Xt.prototype._destroy=function(t,e){Ht.prototype._destroy.call(this,t,(function(t){e(t)}))};var Qt,te=re,ee=Ft;function re(t){if(!(this instanceof re))return new re(t);ee.call(this,t)}z.exports(re,ee),re.prototype._transform=function(t,e,r){r(null,t)};var ne=yt.codes,ie=ne.ERR_MISSING_ARGS,oe=ne.ERR_STREAM_DESTROYED;function ae(t){if(t)throw t}function se(t){t()}function ue(t,e){return t.pipe(e)}var le,ce=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n,i=function(t){return t.length?"function"!=typeof t[t.length-1]?ae:t.pop():ae}(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new ie("streams");var o=e.map((function(t,r){var a=r<e.length-1;return function(t,e,r,n){n=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(n);var i=!1;t.on("close",(function(){i=!0})),void 0===Qt&&(Qt=Gt),Qt(t,{readable:e,writable:r},(function(t){if(t)return n(t);i=!0,n()}));var o=!1;return function(e){if(!i&&!o)return o=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void n(e||new oe("pipe"))}}(t,a,r>0,(function(t){n||(n=t),t&&o.forEach(se),a||(o.forEach(se),i(n))}))}));return e.reduce(ue)};le=K.exports,(le=K.exports=Yt()).Stream=le,le.Readable=le,le.Writable=Rt(),le.Duplex=Dt(),le.Transform=Ft,le.PassThrough=te,le.finished=Gt,le.pipeline=ce;var fe,he=function(t,e,r){for(var n=Math.min(r-e,t.length),i=[],o=null,a=-1;!o&&++a<n;){var s=t[a];"\n"===s?i.length+a&&(o="drill",i=[]):(i.push(s),"*"===s&&";"!==i[0]&&(o="gerber",i=[]))}return o},de=function(t,e,r){if("gerber"!==t&&"drill"!==t)throw new Error('filetype to get next block must be "drill" or "gerber"');for(var n=e.length-r,i="gerber"===t?"*":"\n",o="gerber"===t?"%":"",a=!1,s=!1,u=!1,l=!1,c=[],f=0,h=0;!l&&f<n;){var d=e[r+f];"\n"===d&&h++,d===o?s?(u=!0,c.pop()):(s=!0,c.push(d)):d===i?(a=!0,s&&c.push(d)):d>=" "&&d<="~"&&c.push(d),f++,l=a&&(!s||u)}return{lines:h,read:f,block:l?c.join("").trim():"",rem:l?"":c.join("")}},pe={set:function(t,e,r){return{type:"set",line:r||-1,prop:t,value:e}},done:function(t){return{type:"done",line:t||-1}},level:function(t,e,r){return{type:"level",line:r||-1,level:t,value:e}},tool:function(t,e,r){return{type:"tool",line:r||-1,code:t,tool:e}},op:function(t,e,r){return{type:"op",line:r||-1,op:t,coord:e}},macro:function(t,e,r){return{type:"macro",line:r||-1,name:t,blocks:e}}},ge=pe,_e=1/0,ye=NaN,be=/^\s+|\s+$/g,me=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,we=/^0o[0-7]+$/i,Ee="\\ud800-\\udfff",Ae="\\u0300-\\u036f\\ufe20-\\ufe23",Ce="\\u20d0-\\u20f0",xe="\\ufe0e\\ufe0f",ke="["+Ee+"]",Le="["+Ae+Ce+"]",Se="\\ud83c[\\udffb-\\udfff]",Re="[^"+Ee+"]",De="(?:\\ud83c[\\udde6-\\uddff]){2}",Oe="[\\ud800-\\udbff][\\udc00-\\udfff]",Te="\\u200d",Me="(?:"+Le+"|"+Se+")"+"?",Ie="["+xe+"]?",Pe=Ie+Me+("(?:"+Te+"(?:"+[Re,De,Oe].join("|")+")"+Ie+Me+")*"),Be="(?:"+[Re+Le+"?",Le,De,Oe,ke].join("|")+")",Ne=RegExp(Se+"(?="+Se+")|"+Be+Pe,"g"),je=RegExp("["+Te+Ee+Ae+Ce+xe+"]"),Ge=parseInt,Ue="object"==typeof e&&e&&e.Object===Object&&e,Ye="object"==typeof self&&self&&self.Object===Object&&self,Fe=Ue||Ye||Function("return this")(),$e=(fe="length",function(t){return null==t?void 0:t[fe]});function ze(t){return je.test(t)}function qe(t){return ze(t)?function(t){var e=Ne.lastIndex=0;for(;Ne.test(t);)e++;return e}(t):$e(t)}function Ke(t){return ze(t)?function(t){return t.match(Ne)||[]}(t):function(t){return t.split("")}(t)}var We=Object.prototype.toString,He=Fe.Symbol,Ve=Math.ceil,Xe=Math.floor,Ze=He?He.prototype:void 0,Je=Ze?Ze.toString:void 0;function Qe(t,e){var r="";if(!t||e<1||e>9007199254740991)return r;do{e%2&&(r+=t),(e=Xe(e/2))&&(t+=t)}while(e);return r}function tr(t){if("string"==typeof t)return t;if(nr(t))return Je?Je.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function er(t,e,r){var n=t.length;return r=void 0===r?n:r,!e&&r>=n?t:function(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(r=r>i?i:r)<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=Array(i);++n<i;)o[n]=t[n+e];return o}(t,e,r)}function rr(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function nr(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==We.call(t)}function ir(t){return t?(t=function(t){if("number"==typeof t)return t;if(nr(t))return ye;if(rr(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=rr(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(be,"");var r=ve.test(t);return r||we.test(t)?Ge(t.slice(2),r?2:8):me.test(t)?ye:+t}(t))===_e||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}var or=function(t,e,r){var n;t=null==(n=t)?"":tr(n);var i=(e=function(t){var e=ir(t),r=e%1;return e==e?r?e-r:e:0}(e))?qe(t):0;return e&&i<e?function(t,e){var r=(e=void 0===e?" ":tr(e)).length;if(r<2)return r?Qe(e,t):e;var n=Qe(e,Ve(t/qe(e)));return ze(e)?er(Ke(n),0,t).join(""):n.slice(0,t)}(e-i,r)+t:t},ar=1/0,sr=NaN,ur=/^\s+|\s+$/g,lr=/^[-+]0x[0-9a-f]+$/i,cr=/^0b[01]+$/i,fr=/^0o[0-7]+$/i,hr="\\ud800-\\udfff",dr="\\u0300-\\u036f\\ufe20-\\ufe23",pr="\\u20d0-\\u20f0",gr="\\ufe0e\\ufe0f",_r="["+hr+"]",yr="["+dr+pr+"]",br="\\ud83c[\\udffb-\\udfff]",mr="[^"+hr+"]",vr="(?:\\ud83c[\\udde6-\\uddff]){2}",wr="[\\ud800-\\udbff][\\udc00-\\udfff]",Er="\\u200d",Ar="(?:"+yr+"|"+br+")"+"?",Cr="["+gr+"]?",xr=Cr+Ar+("(?:"+Er+"(?:"+[mr,vr,wr].join("|")+")"+Cr+Ar+")*"),kr="(?:"+[mr+yr+"?",yr,vr,wr,_r].join("|")+")",Lr=RegExp(br+"(?="+br+")|"+kr+xr,"g"),Sr=RegExp("["+Er+hr+dr+pr+gr+"]"),Rr=parseInt,Dr="object"==typeof e&&e&&e.Object===Object&&e,Or="object"==typeof self&&self&&self.Object===Object&&self,Tr=Dr||Or||Function("return this")(),Mr=function(t){return function(e){return null==e?void 0:e[t]}}("length");function Ir(t){return Sr.test(t)}function Pr(t){return Ir(t)?function(t){var e=Lr.lastIndex=0;for(;Lr.test(t);)e++;return e}(t):Mr(t)}function Br(t){return Ir(t)?function(t){return t.match(Lr)||[]}(t):function(t){return t.split("")}(t)}var Nr=Object.prototype.toString,jr=Tr.Symbol,Gr=Math.ceil,Ur=Math.floor,Yr=jr?jr.prototype:void 0,Fr=Yr?Yr.toString:void 0;function $r(t,e){var r="";if(!t||e<1||e>9007199254740991)return r;do{e%2&&(r+=t),(e=Ur(e/2))&&(t+=t)}while(e);return r}function zr(t){if("string"==typeof t)return t;if(Wr(t))return Fr?Fr.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function qr(t,e,r){var n=t.length;return r=void 0===r?n:r,!e&&r>=n?t:function(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(r=r>i?i:r)<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=Array(i);++n<i;)o[n]=t[n+e];return o}(t,e,r)}function Kr(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Wr(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==Nr.call(t)}function Hr(t){return t?(t=function(t){if("number"==typeof t)return t;if(Wr(t))return sr;if(Kr(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Kr(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(ur,"");var r=cr.test(t);return r||fr.test(t)?Rr(t.slice(2),r?2:8):lr.test(t)?sr:+t}(t))===ar||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}var Vr=v,Xr=or,Zr=function(t,e,r){var n;t=null==(n=t)?"":zr(n);var i=(e=function(t){var e=Hr(t),r=e%1;return e==e?r?e-r:e:0}(e))?Pr(t):0;return e&&i<e?t+function(t,e){var r=(e=void 0===e?" ":zr(e)).length;if(r<2)return r?$r(e,t):e;var n=$r(e,Gr(t/Pr(e)));return Ir(e)?qr(Br(n),0,t).join(""):n.slice(0,t)}(e-i,r):t},Jr=function(t,e){if(null==t)return NaN;var r=""+t,n="+";if("-"!==r[0]&&"+"!==r[0]||(n=r[0],r=r.slice(1)),-1!==r.indexOf(".")||null==e||null==e.zero)return Number(n+r);if(null==e.places||2!==e.places.length)return NaN;var i=e.places[0],o=e.places[1];if(!Vr(i)||!Vr(o))return NaN;if("T"===e.zero)r=Zr(r,i+o,"0");else{if("L"!==e.zero)return NaN;r=Xr(r,i+o,"0")}var a=r.slice(0,i),s=r.slice(i,i+o);return Number(n+a+"."+s)},Qr=Jr,tn=/[XY]0\d+/,en=/[XY]\d+0(?=\D|$)/,rn=[{coord:"x",test:/X([+-]?[\d.]+)/},{coord:"y",test:/Y([+-]?[\d.]+)/},{coord:"i",test:/I([+-]?[\d.]+)/},{coord:"j",test:/J([+-]?[\d.]+)/},{coord:"a",test:/A([\d.]+)/}],nn={parse:function(t,e){if(null==t)return{};if(null==e.zero||null==e.places)throw new Error("cannot parse coordinate with format undefined");return rn.reduce((function(r,n){var i=t.match(n.test);return i&&(r[n.coord]=Qr(i[1],e)),r}),{})},detectZero:function(t){return en.test(t)?"L":tn.test(t)?"T":null}},on=/[$\d.]+/,an=new RegExp([/[+\-/xX()]/.source,on.source].join("|"),"g"),sn=function(t,e){var r,n=e.match(an),i=function(){var t,e=n.shift();return on.test(e)?t={type:"n",val:e}:(t=r(),n.shift()),t},o=function(){var e=i(),r=n[0];for("X"===r&&(t._warn("multiplication in macros should use 'x', not 'X'"),r="x");"x"===r||"/"===r;){n.shift(),e={type:r,left:e,right:i()},r=n[0]}return e},a=(r=function(){for(var t=o(),e=n[0];"+"===e||"-"===e;){n.shift(),t={type:e,left:t,right:o()},e=n[0]}return t})(),s=function(t,e){var r,n=t.type;return"n"===n?"$"===(r=t.val)[0]?Number(e[r]):Number(r):"+"===n?s(t.left,e)+s(t.right,e):"-"===n?s(t.left,e)-s(t.right,e):"x"===n?s(t.left,e)*s(t.right,e):s(t.left,e)/s(t.right,e)};return function(t){return s(a,t)}},un=/^-?[\d.]+$/,ln=/^(\$[\d+])=(.+)/,cn=ge,fn=Jr,hn=nn,dn=function(t,e){if("0"===e[0])return{type:"comment"};if(ln.test(e)){var r=e.match(ln),n=r[1],i=r[2],o=sn(t,i);return{type:"variable",set:function(t){return t[n]=o(t),t}}}var a=e.split(",").map((function(e){return un.test(e)?Number(e):sn(t,e)})),s=a[0],u=a[1];return 1===s?{type:"circle",exp:u,dia:a[2],cx:a[3],cy:a[4],rot:a[5]||0}:(2===s&&t._warn("macro aperture vector primitives with code 2 are deprecated"),2===s||20===s?{type:"vect",exp:u,width:a[2],x1:a[3],y1:a[4],x2:a[5],y2:a[6],rot:a[7]}:21===s?{type:"rect",exp:u,width:a[2],height:a[3],cx:a[4],cy:a[5],rot:a[6]}:22===s?(t._warn("macro aperture lower-left rectangle primitives are deprecated"),{type:"rectLL",exp:u,width:a[2],height:a[3],x:a[4],y:a[5],rot:a[6]}):4===s?{type:"outline",exp:u,points:a.slice(3,-1),rot:a[a.length-1]}:5===s?{type:"poly",exp:u,vertices:a[2],cx:a[3],cy:a[4],dia:a[5],rot:a[6]}:6===s?{type:"moire",exp:1,cx:a[1],cy:a[2],dia:a[3],ringThx:a[4],ringGap:a[5],maxRings:a[6],crossThx:a[7],crossLen:a[8],rot:a[9]}:7===s?{type:"thermal",exp:1,cx:a[1],cy:a[2],outerDia:a[3],innerDia:a[4],gap:a[5],rot:a[6]}:void t._warn(s+" is an unrecognized primitive for a macro aperture"))},pn=/^G0*([123])/,gn=/^G3([67])/,_n=/^G7([45])/,yn=/^G7([01])/,bn=/^G9([01])/,mn=/^G0*4/,vn=/^%TO[^%*]*/,wn=/^(?:G54)?D0*([1-9]\d+)/,En=/D0*([123])$/,An=/^(?:G0*[123])?((?:[XYIJ][+-]?\d+){1,4})(?:D0*[123])?$/,Cn=/^%MO(IN|MM)/,xn=/^%FS([LT]?)([AI]?)(.*)X([0-7])([0-7])Y\4\5/,kn=/^%LP([CD])/,Ln=/^%SR(?:X(\d+)Y(\d+)I([\d.]+)J([\d.]+))?/,Sn=/^%ADD0*(\d{2,})([A-Za-z_$][\w\-.]*)(?:,((?:X?[\d.-]+)*))?/,Rn=/^%AM([A-Za-z_$][\w\-.]*)\*?(.*)/,Dn=/\*MO(IN|MM)$/,On=function(t,e){var r="IN"===e?"in":"mm";return t._push(cn.set("units",r))},Tn=function(t,e){if(!mn.test(e)&&!vn.test(e)){if("M02"===e)return t._push(cn.done());if(gn.test(e)){var r="6"===e.match(gn)[1];return t._push(cn.set("region",r))}if(_n.test(e)){var n="4"===e.match(_n)[1]?"s":"m";return t._push(cn.set("arc",n))}if(Cn.test(e)){var i=e.match(Cn)[1];return On(t,i)}if(yn.test(e)){var o="0"===e.match(yn)[1]?"in":"mm";return t._push(cn.set("backupUnits",o))}if(xn.test(e)){var a=e.match(xn),s=a[1],u=a[2],l=a[3],c=Number(a[4]),f=Number(a[5]),h=t.format;h.zero=h.zero||s,h.places||(h.places=[c,f]),h.zero?"T"===h.zero&&t._warn("trailing zero suppression has been deprecated"):(h.zero="L",t._warn("zero suppression missing from format; assuming leading")),l&&t._warn('unknown characters "'+l+'" in "'+e+'" were ignored');var d=1.5*Math.pow(10,-h.places[1]);if(t._push(cn.set("nota",u)),t._push(cn.set("epsilon",d)),Dn.test(e)){var p=e.match(Dn)[1];On(t,p)}}else{if(bn.test(e)){var g="0"===e.match(bn)[1]?"A":"I";return t._push(cn.set("backupNota",g))}if(kn.test(e)){var _=e.match(kn)[1];return t._push(cn.level("polarity",_))}if(Ln.test(e)){var y=e.match(Ln),b=y[1]||1,m=y[2]||1,v=y[3]||0,w=y[4]||0,E={x:Number(b),y:Number(m),i:Number(v),j:Number(w)};return t._push(cn.level("stepRep",E))}if(wn.test(e)){var A=e.match(wn)[1];return t._push(cn.set("tool",A))}if(Sn.test(e))return function(t,e){var r,n,i,o={places:t.format.places},a=e.match(Sn),s=a[1],u=a[2],l=a[3]?a[3].split("X"):[];"C"===u?(r="circle",n=3):"R"===u?(r="rect",n=4):"O"===u?(r="obround",n=4):"P"===u?(r="poly",n=5):(r=u,n=0),"circle"===r?i=[fn(l[0],o)]:"rect"===r||"obround"===r?i=[fn(l[0],o),fn(l[1],o)]:"poly"===r?(i=[fn(l[0],o),Number(l[1]),0],l[2]&&(i[2]=Number(l[2]))):i=l.map(Number);var c=[];l[n-1]?c=[fn(l[n-2],o),fn(l[n-1],o)]:l[n-2]&&(c=[fn(l[n-2],o)]);var f={shape:r,params:i,hole:c};return t._push(cn.tool(s,f))}(t,e);if(Rn.test(e))return function(t,e){var r=e.match(Rn),n=r[1];n.match(/-/)&&t._warn("hyphens in macro name are illegal: "+n);var i=(r[2].length?r[2].split("*"):[]).filter(Boolean).map((function(e){return dn(t,e)}));return t._push(cn.macro(n,i))}(t,e);if(!(En.test(e)||pn.test(e)||An.test(e)))return t._warn('block "'+e+'" was not recognized and was ignored');var C,x=e.match(En),k=e.match(pn),L=e.match(An);if(k&&(C="1"===k[1]?"i":"2"===k[1]?"cw":"ccw",t._push(cn.set("mode",C))),x||L){var S=x?x[1]:"",R=L?L[1]:"",D=hn.parse(R,t.format),O="last";"1"===S?O="int":"2"===S?O="move":"3"===S&&(O="flash"),t._push(cn.op(O,D))}}}},Mn={DRILL:"5",MOVE:"0",LINEAR:"1",CW_ARC:"2",CCW_ARC:"3"},In=v,Pn=ge,Bn=Mn,Nn=Jr,jn=nn,Gn=/;FILE_FORMAT=(\d):(\d)/,Un=/;TYPE=(PLATED|NON_PLATED)/,Yn=/;FORMAT={(.):(.)\/ (absolute|.+)? \/ (metric|inch) \/.+(trailing|leading|decimal|keep)/,Fn=/^(INCH|METRIC|M71|M72)/,$n=/,([TL])Z/,zn=/,(0{1,8})\.(0{1,8})/,qn=/T0*(\d+)[\S]*C([\d.]+)/,Kn=/T0*(\d+)(?![\S]*C)/,Wn=/((?:[XYIJA][+-]?[\d.]+){1,4})(?:G85((?:[XY][+-]?[\d.]+){1,2}))?/,Hn=/^G0([01235])/,Vn=function(t,e,r){if(qn.test(e)){var n=e.match(qn),i=n[1],o={shape:"circle",params:[Nn(n[2])],hole:[]};return t._push(Pn.tool(i,o,r))}if(Kn.test(e)){var a=e.match(Kn)[1];t._push(Pn.set("tool",a,r))}return Wn.test(e)?(t.format.places||(t.format.places=[2,4],t._warn("places format missing; assuming [2, 4]")),t.format.zero||(t.format.zero="T",t._warn("zero suppression missing; assuming trailing suppression")),function(t,e,r){var n=e.match(Wn),i=jn.parse(n[1],t.format);if(n[2])return t._push(Pn.op("move",i,r)),t._push(Pn.set("mode","i",r)),i=jn.parse(n[2],t.format),t._push(Pn.op("int",i,r));switch(Hn.test(e)&&(t._drillMode=e.match(Hn)[1]),t._drillMode){case Bn.DRILL:return t._push(Pn.op("flash",i,r));case Bn.MOVE:return t._push(Pn.op("move",i,r));case Bn.LINEAR:return t._push(Pn.set("mode","i",r)),t._push(Pn.op("int",i,r));case Bn.CW_ARC:return t._push(Pn.set("mode","cw",r)),t._push(Pn.op("int",i,r));case Bn.CCW_ARC:return t._push(Pn.set("mode","ccw",r)),t._push(Pn.op("int",i,r))}}(t,e,r)):"M00"===e||"M30"===e?t._push(Pn.done(r)):"G90"===e?t._push(Pn.set("nota","A",r)):"G91"===e?t._push(Pn.set("nota","I",r)):Fn.test(e)?function(t,e,r){var n=e.match(Fn),i=e.match($n),o=e.match(zn),a="METRIC"===n[1]||"M71"===n[1]?"mm":"in",s=i&&i[1];null==t.format.zero&&s&&(t.format.zero="T"===s?"L":"T"),null==t.format.places&&(t.format.places=o?[o[1].length,o[2].length]:"in"===a?[2,4]:[3,3]),t._push(Pn.set("units",a,r))}(t,e,r):void 0},Xn=function(t){t._drillStash.forEach((function(e){Vn(t,e.block,e.line)})),t._drillStash=[]},Zn={parse:function(t,e){if(";"===e[0]){var r=function(t,e,r){var n={};if(Yn.test(e)){var i=e.match(Yn),o=Number(i[1]),a=Number(i[2]),s=i[3],u=i[4],l=i[5];In(o)&&In(a)&&(n.places=[o,a]),"absolute"===s?t._push(Pn.set("backupNota","A",r)):t._push(Pn.set("backupNota","I",r)),"metric"===u?t._push(Pn.set("backupUnits","mm",r)):t._push(Pn.set("backupUnits","in",r)),n.zero="leading"===l||"keep"===l?"L":"trailing"===l?"T":"D"}else if(Gn.test(e)){var c=e.match(Gn);n.places=[Number(c[1]),Number(c[2])]}else if(Un.test(e)){var f="PLATED"===e.match(Un)[1]?"pth":"npth";t._push(Pn.set("holePlating",f,r))}return n}(t,e,t.line);Object.keys(r).forEach((function(e){t.format[e]||(t.format[e]=r[e])}))}else t.format.zero?Vn(t,e,t.line):(t._drillStash.push({line:t.line,block:e}),Wn.test(e)&&(t.format.zero=jn.detectZero(e),t.format.zero&&t._warn("zero suppression missing; detected "+("L"===t.format.zero?"leading":"trailing")+" suppression")),(t.format.zero||$n.test(e)||t._drillStash.length>=1e3)&&Xn(t))},flush:Xn},Jn=function(t,e){return{message:t,line:e}},Qn=w.StringDecoder,ti=z.exports,ei=K.exports.Transform,ri=he,ni=de,ii=Tn,oi=Zn,ai=Jn,si=Mn,ui=65535,li=function(t,e,r){ei.call(this,{readableObjectMode:!0}),this._decoder=new Qn("utf8"),this._stash="",this._index=0,this._drillMode=si.DRILL,this._drillStash=[],this._syncResult=null,this.line=0,this.format={places:t,zero:e,filetype:r}};ti(li,ei),li.prototype._process=function(t,e){for(;this._index<t.length;){var r=ni(e,t,this._index);this._index+=r.read,this.line+=r.lines,this._stash+=r.rem,r.block&&("gerber"===e?ii(this,r.block):oi.parse(this,r.block))}},li.prototype._transform=function(t,e,r){var n=this.format.filetype;if(t=this._decoder.write(t),!n){if(n=ri(t,this._index,ui),this._index+=t.length,!n)return this._index>=ui?r(new Error("unable to determine filetype")):(this._stash+=t,r());this.format.filetype=n,this._index=0}t=this._stash+t,this._stash="",this._process(t,n),this._index=0,r()},li.prototype._flush=function(t){return"drill"===this.format.filetype&&oi.flush(this),t&&t()},li.prototype._push=function(t){-1===t.line&&(t.line=this.line),(this._syncResult?this._syncResult:this).push(t)},li.prototype._warn=function(t){this.emit("warning",ai(t,this.line))},li.prototype.parseSync=function(t){var e=ri(t,this._index,6553500);return this.format.filetype=e,this._syncResult=[],this._process(t,e),this._flush(),this._syncResult};var ci=v,fi=li,hi=1/0,di=9007199254740991,pi=NaN,gi=4294967295,_i="[object Function]",yi="[object GeneratorFunction]",bi=/^\s+|\s+$/g,mi=/^[-+]0x[0-9a-f]+$/i,vi=/^0b[01]+$/i,wi=/^0o[0-7]+$/i,Ei=/^(?:0|[1-9]\d*)$/,Ai=parseInt,Ci=Object.prototype.toString;function xi(t,e,r,n){var i=t.length;for((r=Ri(r))<0&&(r=-r>i?0:i+r),(n=void 0===n||n>i?i:Ri(n))<0&&(n+=i),n=r>n?0:function(t){return t?(e=Ri(t),r=0,n=gi,e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==r&&(e=e>=r?e:r)),e):0;var e,r,n}(n);r<n;)t[r++]=e;return t}function ki(t,e,r){if(!Li(r))return!1;var n=typeof e;return!!("number"==n?function(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=di}(t.length)&&!function(t){var e=Li(t)?Ci.call(t):"";return e==_i||e==yi}(t)}(r)&&function(t,e){return!!(e=null==e?di:e)&&("number"==typeof t||Ei.test(t))&&t>-1&&t%1==0&&t<e}(e,r.length):"string"==n&&e in r)&&function(t,e){return t===e||t!=t&&e!=e}(r[e],t)}function Li(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Si(t){return t?(t=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==Ci.call(t)}(t))return pi;if(Li(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Li(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(bi,"");var r=vi.test(t);return r||wi.test(t)?Ai(t.slice(2),r?2:8):mi.test(t)?pi:+t}(t))===hi||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function Ri(t){var e=Si(t),r=e%1;return e==e?r?e-r:e:0}var Di=function(t,e,r,n){var i=t?t.length:0;return i?(r&&"number"!=typeof r&&ki(t,e,r)&&(r=0,n=i),xi(t,e,r,n)):[]},Oi=function(t,e){var r,n;for(n=0;n<t.length;n++)if(e(r=t[n]))return r},Ti=function(t,e,r){return t.reduce((function(t,n){var i=Mi(e,n.position);return i<r&&i<t.distance?{point:n,distance:i}:t}),{point:void 0,distance:1/0}).point},Mi=function(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))},Ii=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Pi=function(t,e){this._edges=[],this._optimize=t,this._fillGaps=e,this.length=0};Pi.prototype.add=function(t){var e={segment:t,start:t.start,end:t.end};this._edges.push(e),this.length++},Pi.prototype._fillGapsAndOptimize=function(){var t=this._edges.map((function(t){return t.segment}));this._edges=[],this.length=0;for(var e=t.reduce((function(t,e){return t.concat([{position:e.start,edges:[]},{position:e.end,edges:[]}])}),[]),r=t.length,n=0;n<r;n++){var i,o,a=t[n],s=this._fillGaps,u=2*n,l=u+1,c=e.slice(0,u).concat(e.slice(l+1));if(i=Ti(c,a.start,s),o=Ti(c,a.end,s),i?s&&(a.start=i.position):i={position:a.start,edges:[]},o?s&&(a.end=o.position):o={position:a.end,edges:[]},!Oi(this._edges,(function(t){return e=t.segment,r=a,"line"===e.type&&(Ii(e.start,r.start)&&Ii(e.end,r.end)||Ii(e.start,r.end)&&Ii(e.end,r.start));var e,r}))){var f=this._edges.length,h={segment:a,start:i,end:o};e[u].edges.push(f),e[u].position=h.start.position,e[l].edges.push(f),e[l].position=h.end.position,this._edges.push(h),this.length++}}this._edges.forEach((function(t){e.forEach((function(e){Ii(e.position,t.start.position)&&(t.start.edges=t.start.edges.concat(e.edges)),Ii(e.position,t.end.position)&&(t.end.edges=t.end.edges.concat(e.edges))}))}))},Pi.prototype.traverse=function(){if(!this._optimize)return this._edges.map((function(t){return t.segment}));this._fillGapsAndOptimize();for(var t,e,r,n,i,o,a=Di(Array(this._edges.length),!1),s=[],u=[],l={position:[]};u.length<this._edges.length;)for(t=a.indexOf(!1),s.push(t);s.length;)t=s.pop(),a[t]||(a[t]=!0,r=(e=this._edges[t]).end,Ii(l.position,r.position)?(i=e.segment,o=void 0,o={type:i.type,start:i.end,end:i.start},"arc"===i.type&&(o.center=i.center,o.radius=i.radius,o.sweep=i.sweep,o.dir="cw"===i.dir?"ccw":"cw"),n=o,l=e.start):(n=e.segment,l=e.end),l.edges.reverse().forEach((function(t){a[t]||s.push(t)})),u.push(n));return u};var Bi=Pi,Ni=function(t,e){return{message:t,line:e}},ji="object"==typeof e&&e&&e.Object===Object&&e,Gi="object"==typeof self&&self&&self.Object===Object&&self,Ui=ji||Gi||Function("return this")(),Yi=Object.prototype,Fi=Yi.hasOwnProperty,$i=Yi.toString,zi=Ui.Symbol,qi=zi?zi.toStringTag:void 0;function Ki(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":qi&&qi in Object(t)?function(t){var e=Fi.call(t,qi),r=t[qi];try{t[qi]=void 0;var n=!0}catch(o){}var i=$i.call(t);n&&(e?t[qi]=r:delete t[qi]);return i}(t):function(t){return $i.call(t)}(t)}var Wi=function(t,e){return[Math.min(t[0],e[0]),Math.min(t[1],e[1]),Math.max(t[2],e[2]),Math.max(t[3],e[3])]},Hi=function(t,e){var r=e[0],n=e[1];return[t[0]+r,t[1]+n,t[2]+r,t[3]+n]},Vi={new:function(){return[1/0,1/0,-1/0,-1/0]},add:Wi,addPoint:function(t,e){return[Math.min(t[0],e[0]),Math.min(t[1],e[1]),Math.max(t[2],e[0]),Math.max(t[3],e[1])]},addCircle:function(t,e,r,n){return[Math.min(t[0],r-e),Math.min(t[1],n-e),Math.max(t[2],r+e),Math.max(t[3],n+e)]},translate:Hi,repeat:function(t,e){return Wi(t,Hi(t,e))}},Xi=function(t){if(!function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}(t))return!1;var e=Ki(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},Zi=v,Ji=Vi,Qi=function(t){var e=Math.round(1e8*t)/1e8;return 0===e?0:e},to=function(t,e){e=e*Math.PI/180;var r=Math.sin(e),n=Math.cos(e),i=t[0],o=t[1];return[Qi(i*n-o*r),Qi(i*r+o*n)]},eo=function(t,e,r,n){var i=t/2;if(e=e||0,r=r||0,n&&(e||r)){var o=to([e,r],n);e=o[0],r=o[1]}return{shape:{type:"circle",cx:e,cy:r,r:t/2},box:Ji.addCircle(Ji.new(),i,e,r)}},ro=function(t,e,r,n,i,o){if(o){var a=to([t,e],o),s=to([r,n],o);t=a[0],e=a[1],r=s[0],n=s[1]}var u=(n-e)/(r-t),l=i/2,c=l,f=l;Zi(u)?(c*=u/Math.sqrt(1+Math.pow(u,2)),f*=1/Math.sqrt(1+Math.pow(u,2))):f=0;var h=[];h.push([Qi(t+c),Qi(e-f)]),h.push([Qi(r+c),Qi(n-f)]),h.push([Qi(r-c),Qi(n+f)]),h.push([Qi(t-c),Qi(e+f)]);var d=h.reduce((function(t,e){return Ji.addPoint(t,e)}),Ji.new());return{shape:{type:"poly",points:h},box:d}},no=function(t,e,r,n,i,o){n=n||0,i=i||0,r=r||0;var a=t/2,s=e/2;return(o=o||0)?ro(n-a,i,n+a,i,e,o):{shape:{type:"rect",cx:n,cy:i,r:r,width:t,height:e},box:[-a+n,-s+i,a+n,s+i]}},io=function(t,e,r,n,i){n=n||0,i=i||0;for(var o,a,s,u=[],l=Ji.new(),c=t/2,f=r*Math.PI/180,h=2*Math.PI/e,d=0;d<e;d++)o=h*d+f,a=n+Qi(c*Math.cos(o)),s=i+Qi(c*Math.sin(o)),l=Ji.addPoint(l,[a,s]),u.push([a,s]);return{shape:{type:"poly",points:u},box:l}},oo=function(t,e,r,n){return{type:"ring",cx:t,cy:e,r:r,width:n}},ao=function(t,e){var r={shape:[],box:Ji.new()},n=1;return(e=e||[]).reduce((function(e,r){var i;switch("variable"!==r.type&&"comment"!==r.type&&(r=Object.keys(r).reduce((function(e,n){var i=r[n];return e[n]=function e(r){return Array.isArray(r)?r.map(e):Xi(r)?r(t):r}(i),e}),{})),null!=r.exp&&r.exp!==n&&(e.shape.push({type:"layer",polarity:1===r.exp?"dark":"clear",box:e.box.slice(0)}),n=r.exp),r.type){case"circle":i=eo(r.dia,r.cx,r.cy,r.rot);break;case"vect":i=ro(r.x1,r.y1,r.x2,r.y2,r.width,r.rot);break;case"rect":i=no(r.width,r.height,0,r.cx,r.cy,r.rot);break;case"rectLL":var o=r.height/2,a=r.width/2,s=r.x+a,u=r.y+o;i=no(r.width,r.height,0,s,u,r.rot);break;case"outline":i=function(t,e){for(var r,n=[],i=Ji.new(),o=0;o<t.length-2;o+=2)r=[t[o],t[o+1]],e&&(r=to(r,e)),n.push(r),i=Ji.addPoint(i,r);return{shape:{type:"poly",points:n},box:i}}(r.points,r.rot);break;case"poly":i=io(r.dia,r.vertices,r.rot,r.cx,r.cy);break;case"moire":i=function(t,e,r,n,i,o,a,s,u){for(var l=t/2,c=[],f=Ji.addCircle(Ji.new(),l,a,s),h=e/2,d=r+h;l>e&&c.length<n;)l-=h,c.push(oo(a,s,Qi(l),e)),l-=d;l>0&&c.length<n&&c.push(eo(Qi(2*l),a,s).shape);var p=no(o,i,0,a,s,u),g=no(i,o,0,a,s,u);return c.push(p.shape),c.push(g.shape),f=Ji.add(f,p.box),{shape:c,box:f=Ji.add(f,g.box)}}(r.dia,r.ringThx,r.ringGap,r.maxRings,r.crossThx,r.crossLen,r.cx,r.cy,r.rot);break;case"thermal":i=function(t,e,r,n,i,o){var a=Qi((r-i)/2),s=Qi((r+i)/4),u=Qi((r-n)/2),l=Qi((r-u)/2),c=Ji.addCircle(Ji.new(),r/2,t,e);return{shape:{type:"clip",shape:[no(a,a,0,t+s,e+s,o).shape,no(a,a,0,t-s,e+s,o).shape,no(a,a,0,t-s,e-s,o).shape,no(a,a,0,t+s,e-s,o).shape],clip:oo(t,e,l,u)},box:c}}(r.cx,r.cy,r.outerDia,r.innerDia,r.gap,r.rot);break;case"variable":return t=r.set(t),e;default:return e}return e.shape=e.shape.concat(i.shape),1===n&&(e.box=Ji.add(e.box,i.box)),e}),r)},so=Vi,uo=Math.PI/2,lo=Math.PI,co=2*Math.PI,fo=3*Math.PI/2,ho=function(t,e){return t>=e?t:0},po=function(t,e,r,n,i,o,a,s,u,l){var c,f=r[2]||Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2)),h=[],d=[],p=[];r[0]&&"s"===o?d.push(t[0]+r[0],t[0]-r[0]):d.push(t[0]+r[0]),r[1]&&"s"===o?p.push(t[1]+r[1],t[1]-r[1]):p.push(t[1]+r[1]);for(var g=0;g<d.length;g++)for(var _=0;_<p.length;_++)h.push([d[g],p[_]]);r[2]?(o="m",c=function(t,e,r,n,i){var o="ccw"===r?1:-1,a=(t[0]+e[0])/2,s=(t[1]+e[1])/2,u=e[0]-t[1],l=e[1]-t[1],c=Math.sqrt(Math.pow(u,2)+Math.pow(l,2)),f=c/2,h=Math.sqrt(Math.pow(i,2)-Math.pow(f,2)),d=o*u*h/c;return[[ho(a+-o*l*h/c,n),ho(s+d,n)]]}(t,e,i,s,r[2])):c="s"===o?h.filter((function(r){var n=Math.sqrt(Math.pow(r[0]-t[0],2)+Math.pow(r[1]-t[1],2)),i=Math.sqrt(Math.pow(r[0]-e[0],2)+Math.pow(r[1]-e[1],2));return Math.abs(n-f)<=s&&Math.abs(i-f)<=s})):h;var y=function(t,e,r,n,i){for(var o,a,s,u,l;null==l&&i.length>0;)u=i.pop(),o=Math.atan2(t[1]-u[1],t[0]-u[0]),a=Math.atan2(e[1]-u[1],e[0]-u[0]),"cw"===r?o=o>=a?o:o+co:a=a>=o?a:a+co,s=Math.abs(o-a),"s"===n?s<=uo&&(l=u):l=u;if(null!=l)return o=(o=o>=0?o:o+co)<co?o:o-co,a=(a=a>=0?a:a+co)<co?a:a-co,{center:l,sweep:s,start:t.concat(o),end:e.concat(a)}}(t,e,i,o,c);"m"===o&&t[0]===e[0]&&t[1]===e[1]&&(y.sweep=co);var b=so.new();return null!=y?(u.add({type:"arc",start:y.start,end:y.end,center:y.center,sweep:y.sweep,radius:f,dir:i}),b=function(t,e,r,n,i){var o,a,s=t.start,u=t.end,l=t.center,c=t.sweep;"cw"===i?(o=u[2],a=s[2]):(o=s[2],a=u[2]);var f=[s,u];return(o>a||c===co)&&f.push([l[0]+e,l[1]]),((o=o>=uo?o-uo:o+fo)>(a=a>=uo?a-uo:a+fo)||c===co)&&f.push([l[0],l[1]+e]),((o=o>=uo?o-uo:o+fo)>(a=a>=uo?a-uo:a+fo)||c===co)&&f.push([l[0]-e,l[1]]),((o=o>=uo?o-uo:o+fo)>(a=a>=uo?a-uo:a+fo)||c===co)&&f.push([l[0],l[1]-e]),f.reduce((function(t,e){if(!r){var i=so.translate(n.box,e);return so.add(t,i)}return so.addPoint(t,e)}),so.new())}(y,f,a,n,i)):l._warn("skipping impossible arc"),b},go=function(t,e,r,n,i,o,a,s,u,l){var c=a||n&&n.trace.length>0,f=a||n&&1===n.trace.length,h=n?n.code:"[NO TOOL SET]";return c?"i"===i?a||1===n.trace.length?function(t,e,r,n,i){if(i.add({type:"line",start:t,end:e}),!n){var o=so.translate(r.box,t),a=so.translate(r.box,e);return so.add(o,a)}var s=so.new();return s=so.addPoint(s,t),so.addPoint(s,e)}(t,e,n,a,u):function(t,e,r,n,i){var o=r.trace[0]/2,a=r.trace[1]/2,s=Math.atan2(e[1]-t[1],e[0]-t[0]),u=t[0]-o,l=t[0]+o,c=t[1]-a,f=t[1]+a,h=e[0]-o,d=e[0]+o,p=e[1]-a,g=e[1]+a,_=[];return t[0]===e[0]&&t[1]===e[1]?_.push([u,c],[l,c],[l,f],[u,f]):s>=0&&s<uo?_.push([u,c],[l,c],[d,p],[d,g],[h,g],[u,f]):s>=uo&&s<=lo?_.push([l,c],[l,f],[d,g],[h,g],[h,p],[u,c]):s>=-lo&&s<-uo?_.push([l,f],[u,f],[h,g],[h,p],[d,p],[l,c]):_.push([u,f],[u,c],[h,p],[d,p],[d,g],[l,f]),_.forEach((function(t,e){var r=e<_.length-1?e+1:0;n.add({type:"line",start:t,end:_[r]})})),i._finishPath(),so.add(so.translate(r.box,t),so.translate(r.box,e))}(t,e,n,u,l):f?po(t,e,r,n,i,o,a,s,u,l):(l._warn("cannot draw arc with non-circular tool "+h+"; ignoring interpolate"),so.new()):(l._warn("tool "+h+" is not strokable; ignoring interpolate"),so.new())},_o=function(t,e,r,n,i,o,a,s,u,l){var c,f=[null!=e.x?e.x:r[0],null!=e.y?e.y:r[1]],h=[null!=e.i?e.i:0,null!=e.j?e.j:0,e.a];switch(t){case"flash":c=function(t,e,r,n){return r?(n._warn("flash in region ignored"),so.new()):e?(e.flashed||(e.flashed=!0,n.push({type:"shape",tool:e.code,shape:e.pad})),n.push({type:"pad",tool:e.code,x:t[0],y:t[1]}),so.translate(e.box,t)):(n._warn("flash with unknown tool ignored"),so.new())}(f,n,a,l);break;case"int":c=go(r,f,h,n,i,o,a,u,s,l);break;default:c=so.new()}return{pos:f,box:c}},yo=K.exports.Transform,bo=z.exports,mo=Bi,vo=Ni,wo=function(t,e){var r,n,i=[],o=Ji.new(),a=t.shape,s=t.params;if("circle"===a)n=eo(s[0]);else if("rect"===a)n=no(s[0],s[1]);else if("obround"===a)n=no(s[0],s[1],Math.min(s[0],s[1])/2);else{if("poly"!==a){var u=s.reduce((function(t,e,r){return t["$"+(r+1)]=e,t}),{});return ao(u,e[a])}n=io(s[0],s[1],s[2])}return i.push(n.shape),o=Ji.add(o,n.box),t.hole.length&&(r=1===t.hole.length?eo(t.hole[0]).shape:no(t.hole[0],t.hole[1]).shape,i.push({type:"layer",polarity:"clear",box:o},r)),{shape:i,box:o}},Eo=_o,Ao=Vi,Co=function(t,e,r,n,i,o){yo.call(this,{readableObjectMode:!0,writableObjectMode:!0}),this.format={units:t,backupUnits:e||"in",nota:r,backupNota:n||"A"},this._formatLock={units:null!=t,backupUnits:null!=e,nota:null!=r,backupNota:null!=n},this._plotAsOutline=!0===o?11e-5:o,"in"===(t||this.format.backupUnits)&&(this._plotAsOutline=this._plotAsOutline/25.4),this._optimizePaths=i||o,this._line=0,this._done=!1,this._tool=null,this._outTool=null,this._tools={},this._macros={},this._pos=[0,0],this._box=Ao.new(),this._mode=null,this._arc=null,this._region=!1,this._path=new mo(this._optimizePaths,this._plotAsOutline),this._epsilon=null,this._lastOp=null,this._stepRep=[]};bo(Co,yo),Co.prototype._finishPath=function(t){var e=this._path.traverse();if(this._path=new mo(!t&&this._optimizePaths,this._plotAsOutline),e.length){var r=this._plotAsOutline?this._outTool:this._tool;this._region||1!==r.trace.length?this.push({type:"fill",path:e}):this.push({type:"stroke",width:r.trace[0],path:e})}},Co.prototype._warn=function(t){this.emit("warning",vo(t,this._line))},Co.prototype._checkFormat=function(){this.format.units||(this.format.units=this.format.backupUnits,this._warn("units not set; using backup units: "+this.format.units)),this.format.nota||(this.format.nota=this.format.backupNota,this._warn("notation not set; using backup notation: "+this.format.nota))},Co.prototype._updateBox=function(t){var e=this._stepRep.length;if(e){var r=Ao.repeat(t,this._stepRep[e-1]);this._box=Ao.add(this._box,r)}else this._box=Ao.add(this._box,t)},Co.prototype._transform=function(t,e,r){var n=t.type;if(this._line=t.line,this._done)return this._warn("ignoring extra command recieved after done command"),r();if("op"===n){this._checkFormat();var i=t.op,o=t.coord;if("I"===this.nota){var a=this;o=Object.keys(o).reduce((function(t,e){var r=o[e];return t[e]="x"===e?a._pos[0]+r:"y"===e?a._pos[1]+r:r,t}),{})}"last"===i&&(this._warn("modal operation commands are deprecated"),i=this._lastOp),"int"===i&&(null==this._mode&&(this._warn("no interpolation mode specified; assuming linear"),this._mode="i"),null!=this._arc||"cw"!==this._mode.slice(-2)||o.a||(this._warn("quadrant mode unspecified; assuming single quadrant"),this._arc="s")),this._plotAsOutline&&(this._outTool=this._tool);var s=Eo(i,o,this._pos,this._tool,this._mode,this._arc,this._region||this._plotAsOutline,this._path,this._epsilon,this);this._lastOp=i,this._pos=s.pos,this._updateBox(s.box)}else if("set"===n){var u=t.prop,l=t.value;"region"===u?(this._finishPath(l),this._region=l):!function(t){return"units"===t||"backupUnits"===t||"nota"===t||"backupNota"===t}(u)||this._formatLock[u]?"tool"===u?this._region?this._warn("cannot change tool while region mode is on"):this._tools[l]?this._outTool||(this._finishPath(),this._tool=this._tools[l]):this._warn("tool "+l+" is not defined"):this["_"+u]=l:(this.format[u]=l,"units"!==u&&"nota"!==u||(this._formatLock[u]=!0))}else if("tool"===n){var c=t.code,f=t.tool;this._tools[c]&&this._warn("tool "+c+" is already defined; overwriting definition");var h=wo(f,this._macros),d={code:c,trace:[],pad:h.shape,flashed:!1,box:h.box};"circle"!==f.shape&&"rect"!==f.shape||0===f.hole.length&&(d.trace=f.params),this._outTool||(this._finishPath(),this._tools[c]=d,this._tool=d)}else if("macro"===n)this._macros[t.name]=t.blocks;else if("level"===n){var p=t.level,g=t.value;if(this._finishPath(),"polarity"===p)this.push({type:"polarity",polarity:"C"===g?"clear":"dark",box:this._box.slice(0)});else{var _=[];if(g.x>1||g.y>1)for(var y=0;y<g.x;y++)for(var b=0;b<g.y;b++)_.push([y*g.i,b*g.j]);this._stepRep=_,this.push({type:"repeat",offsets:this._stepRep.slice(0),box:this._box.slice(0)})}}else"done"===n&&(this._done=!0);return r()},Co.prototype._flush=function(t){this._finishPath(),this.push({type:"size",box:this._box,units:this.format.units}),t()};var xo=Co,ko=function(t){if("A"===t||"I"===t)return t;throw new Error('notation must be "in" or "mm"')},Lo=function(t){if("in"===t||"mm"===t)return t;throw new Error('units must be "in" or "mm"')},So=/["'&<>]/;var Ro=function(t){var e,r=""+t,n=So.exec(r);if(!n)return r;var i="",o=0,a=0;for(o=n.index;o<r.length;o++){switch(r.charCodeAt(o)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#39;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}a!==o&&(i+=r.substring(a,o)),a=o+1,i+=e}return a!==o?i+r.substring(a,o):i},Do=function(t,e,r){e=e||{},r=r||[];var n="<"+Ro(t),i=Object.keys(e).reduce((function(t,r){var n=e[r];return t+(null!=n?" "+Ro(r)+'="'+Ro(n)+'"':"")}),"");return n+i+(r.length?">"+r.join("")+"</"+t+">":"/>")},Oo=function(t){return Math.round(1e10*t)/1e7},To=function(t,e,r){return r("rect",{x:Oo(t[0]),y:Oo(t[1]),width:Oo(t[2]-t[0]),height:Oo(t[3]-t[1]),fill:e})},Mo={shift:Oo,maskLayer:function(t,e,r){return r("g",{mask:"url(#"+t+")"},e)},createMask:function(t,e,r,n){return n("mask",{id:t,fill:"#000",stroke:"#000"},[n("g",{},r=[To(e,"#fff",n)].concat(r))])}},Io=Mo.shift,Po=Mo.createMask,Bo=Mo.maskLayer,No=function(t,e,r){return{tag:t,attr:e,children:r||[]}},jo=function(t,e,r,n){var i={cx:Io(t),cy:Io(e),r:Io(r)};return null!=n&&(i["stroke-width"]=Io(n),i.fill="none"),No("circle",i)},Go=function(t,e,r,n,i){var o={x:Io(t-n/2),y:Io(e-i/2),width:Io(n),height:Io(i)};return r&&(o.rx=Io(r),o.ry=Io(r)),No("rect",o)},Uo=function(t){var e=t.map((function(t){return t.map(Io).join(",")})).join(" ");return No("polygon",{points:e})},Yo=Mo.shift,Fo=Mo.shift,$o=function(t,e){return("L"===t||"M"===t?"":"L ")+Fo(e[0])+" "+Fo(e[1])},zo=function(t,e,r,n,i,o){if(0===r)return $o(t,i);if(r===2*Math.PI){var a=[2*o[0]-i[0],2*o[1]-i[1]];return zo(t,e,Math.PI,n,a,o)+" "+zo("A",e,Math.PI,n,i,o)}var s="A"===t?"":"A ";return s+=(e=Fo(e))+" "+e+" 0 ",s+=r>Math.PI?"1 ":"0 ",s+="ccw"===n?"1 ":"0 ",s+=Fo(i[0])+" "+Fo(i[1])},qo=function(t,e){var r,n,i=e.type,o=e.start,a=e.end;return r=t.last,n=o,(r[0]!==n[0]||r[1]!==n[1])&&(t.data+=(t.data?" ":"")+function(t){return"M "+Fo(t[0])+" "+Fo(t[1])}(o),t.lastCmd="M"),t.data+=" ","line"===i?(t.data+=$o(t.lastCmd,a),t.lastCmd="L"):(t.data+=zo(t.lastCmd,e.radius,e.sweep,e.dir,a,e.center),t.lastCmd="A"),t.last=a,t},Ko=Do,Wo=function(t,e,r){var n=r||Ko,i={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"0","fill-rule":"evenodd",width:t.width+t.units,height:t.height+t.units,viewBox:t.viewBox.join(" ")};"string"==typeof e&&(e={id:e}),Object.keys(e||{}).forEach((function(t){var r=e[t];null!=r&&(i[t]=r)}));var o=[];if(t.layer.length){t.defs.length&&o.push(n("defs",{},t.defs));var a="translate(0,"+(t.viewBox[3]+2*t.viewBox[1])+") scale(1,-1)";o.push(n("g",{transform:a,fill:"currentColor",stroke:"currentColor"},t.layer))}return n("svg",i,o)},Ho=K.exports.Transform,Vo=z.exports,Xo=v,Zo=function(t,e,r,n){var i=t+"_pad-"+e,o=i+"_",a=r.reduce((function(t,e,a){var s;switch(e.type){case"circle":s=jo(e.cx,e.cy,e.r);break;case"ring":s=jo(e.cx,e.cy,e.r,e.width);break;case"rect":s=Go(e.cx,e.cy,e.r,e.width,e.height);break;case"poly":s=Uo(e.points);break;case"clip":var u=function(t,e,r,n,i){var o=t+"mask-"+e,a="url(#"+o+")",s=jo(n.cx,n.cy,n.r,n.width),u=i("mask",{id:o,stroke:"#fff"},[i(s.tag,s.attr)]),l=r.map((function(t){var e="rect"===t.type?Go(t.cx,t.cy,t.r,t.width,t.height):Uo(t.points);return i(e.tag,e.attr)}));return{mask:u,layer:No("g",{mask:a},l)}}(o,a,e.shape,e.clip,n);t.masks.push(u.mask),s=u.layer;break;case"layer":if(t.count++,t.last=e.polarity,"clear"===e.polarity){var l=o+t.count;t.maskId=l,t.maskBox=e.box.slice(0),t.maskChildren=[],t.layers=[Bo(l,t.layers,n)]}else{var c=Po(t.maskId,t.maskBox,t.maskChildren,n);t.masks.push(c)}}if(s){1===r.length&&(s.attr.id=i);var f=n(s.tag,s.attr,s.children);"dark"===t.last?t.layers.push(f):t.maskChildren.push(f)}return t}),{count:0,last:"dark",layers:[],maskId:"",maskBox:[],maskChildren:[],masks:[]});return"clear"===a.last&&a.masks.push(Po(a.maskId,a.maskBox,a.maskChildren,n)),r.length>1&&(a.layers=n("g",{id:i},a.layers)),a.masks.concat(a.layers)},Jo=function(t,e,r,n,i){return i("use",{"xlink:href":"#"+t+"_pad-"+e,x:Yo(r),y:Yo(n)})},Qo=function(t,e,r){var n={d:t.reduce(qo,{last:[],data:""}).data};return null!=e&&(n.fill="none",n["stroke-width"]=Fo(e)),r("path",n)},ta=Wo,ea=Mo.shift,ra=Mo.maskLayer,na=Mo.createMask,ia=function(t,e,r,n){Ho.call(this,{writableObjectMode:!0,readableObjectMode:n}),this.id=t,this.attributes=e,this.defs=[],this.layer=[],this.viewBox=[0,0,0,0],this.width=0,this.height=0,this.units="",this._maskId="",this._maskBox=[],this._mask=[],this._blockMode=!1,this._blockBox=[],this._block=[],this._blockCount=0,this._blockLayerCount=0,this._offsets=[],this._clearCount=0,this._lastLayer=0,this._blockCount=0,this._blockCount=0,this._element=r};Vo(ia,Ho),ia.prototype._transform=function(t,e,r){switch(t.type){case"shape":this.defs=this.defs.concat(Zo(this.id,t.tool,t.shape,this._element));break;case"pad":this._draw(Jo(this.id,t.tool,t.x,t.y,this._element));break;case"fill":this._draw(Qo(t.path,null,this._element));break;case"stroke":this._draw(Qo(t.path,t.width,this._element));break;case"polarity":this._handleNewPolarity(t.polarity,t.box);break;case"repeat":this._handleNewRepeat(t.offsets,t.box);break;case"size":this._handleSize(t.box,t.units)}r()},ia.prototype._flush=function(t){this._handleNewRepeat([]),this.push(ta(this,this.attributes,this._element)),t()},ia.prototype._finishBlockLayer=function(){if(this._block.length){this._blockLayerCount++;var t=this.id+"_block-"+this._blockCount+"-"+this._blockLayerCount;this.defs.push(this._element("g",{id:t},this._block)),this._block=[]}},ia.prototype._finishClearLayer=function(){return!!this._maskId&&(this.defs.push(na(this._maskId,this._maskBox,this._mask,this._element)),this._maskId="",this._maskBox=[],this._mask=[],!0)},ia.prototype._handleNewPolarity=function(t,e){if(this._blockMode)return 0!==this._blockLayerCount||this._block.length||(this._blockMode="dark"===t?1:2),this._finishBlockLayer();this._clearCount="clear"===t?this._clearCount+1:this._clearCount;var r=this.id+"_clear-"+this._clearCount;"clear"===t?(this.layer=[ra(r,this.layer,this._element)],this._maskId=r,this._maskBox=e.slice(0)):this._finishClearLayer(e)},ia.prototype._handleNewRepeat=function(t,e){var r=0===t.length,n=this._finishClearLayer();this._finishBlockLayer();var i=this.layer,o=this._element,a=this._blockMode,s=this._blockLayerCount,u=this.id+"_block-"+this._blockCount+"-";if(this._offsets.forEach((function(t){for(var e=a;e<=s;e+=2)i.push(o("use",{"xlink:href":"#"+u+e,x:ea(t[0]),y:ea(t[1])}))})),s>2-a){var l=u+"clear";this.layer=[ra(l,i,this._element)],this._maskId=l,this._maskBox=this._blockBox.slice(0),this._mask=this._offsets.reduce((function(t,e){for(var r,n=1;n<=s;n++){r=1===a?n%2==1:n%2==0;var i={"xlink:href":"#"+u+n,x:ea(e[0]),y:ea(e[1])};r&&(i.fill="#fff",i.stroke="#fff"),t.push(o("use",i))}return t}),[]),n=this._finishClearLayer()}this._offsets=t,r?this._blockMode=0:(this._blockMode=n?2:1,this._blockCount++,this._blockLayerCount=0,this._blockBox=e.every(Xo)?e:[0,0,0,0])},ia.prototype._handleSize=function(t,e){if(t.every(Xo)){var r=ea(t[0]),n=ea(t[1]),i=ea(t[2]-t[0]),o=ea(t[3]-t[1]);this.viewBox=[r,n,i,o],this.width=i/1e3,this.height=o/1e3,this.units=e}},ia.prototype._draw=function(t){this._blockMode?this._block.push(t):this._maskId?this._mask.push(t):this.layer.push(t)};var oa=["id","attributes","defs","layer","viewBox","width","height","units"],aa=d,sa=function(t){var e=(t=t||{}).places?function(t){if(Array.isArray(t)&&2===t.length&&ci(t[0])&&ci(t[1]))return t;throw new Error("places must be an array of two whole numbers")}(t.places):null,r=t.zero?function(t){if("T"===t||"L"===t)return t;throw new Error("zero suppression must be 'L' or 'T'")}(t.zero):null,n=t.filetype?function(t){if("gerber"===t||"drill"===t)return t;throw new Error('filetype must be "drill" or "gerber"')}(t.filetype):null;return new fi(e,r,n)},ua=function(t){var e=(t=t||{}).units?Lo(t.units):null,r=t.backupUnits?Lo(t.backupUnits):null,n=t.nota?ko(t.nota):null,i=t.backupNota?ko(t.backupNota):null;return new xo(e,r,n,i,t.optimizePaths,t.plotAsOutline)},la=Do,ca=ia,fa=Wo,ha=function(t){return oa.reduce((function(e,r){return null!=t[r]&&(e[r]=t[r]),e}),{})};l.exports=function(t,e,r){"function"==typeof e&&(r=e,e=null);var n,i=("string"==typeof(n=e)?n={id:n}:n||(n={}),{id:aa.ensure(n.id),attributes:n.attributes||{},createElement:n.createElement||la,objectMode:null!=n.objectMode&&n.objectMode,parser:{places:n.places,zero:n.zero,filetype:n.filetype},plotter:{units:n.units,backupUnits:n.backupUnits,nota:n.nota,backupNota:n.backupNota,optimizePaths:n.optimizePaths,plotAsOutline:n.plotAsOutline}}),o=null!=r,a=new ca(i.id,i.attributes,i.createElement,i.objectMode),s=sa(i.parser),u=ua(i.plotter);if(a.parser=s,a.plotter=u,s.on("warning",(function(t){a.emit("warning",t)})),u.on("warning",(function(t){a.emit("warning",t)})),s.once("error",(function(t){a.emit("error",t)})),u.once("error",(function(t){a.emit("error",t)})),s.once("end",(function(){a.filetype=s.format.filetype})),t.pipe?(t.setEncoding("utf8"),t.pipe(s)):process.nextTick((function(){s.write(t),s.end()})),s.pipe(u).pipe(a),o){var l="",c=function(){return r(null,l)};a.on("readable",(function(){var t;do{t=a.read()||"",l+=t}while(t)})),a.once("end",c),a.once("error",(function(t){return a.removeListener("end",c),r(t)}))}return a},l.exports.render=fa,l.exports.clone=ha;var da={exports:{}},pa={TYPE_COPPER:"copper",TYPE_SOLDERMASK:"soldermask",TYPE_SILKSCREEN:"silkscreen",TYPE_SOLDERPASTE:"solderpaste",TYPE_DRILL:"drill",TYPE_OUTLINE:"outline",TYPE_DRAWING:"drawing",SIDE_TOP:"top",SIDE_BOTTOM:"bottom",SIDE_INNER:"inner",SIDE_ALL:"all",_CAD_KICAD:"kicad",_CAD_ALTIUM:"altium",_CAD_ALLEGRO:"allegro",_CAD_EAGLE:"eagle",_CAD_EAGLE_LEGACY:"eagle-legacy",_CAD_EAGLE_OSHPARK:"eagle-oshpark",_CAD_EAGLE_PCBNG:"eagle-pcbng",_CAD_GEDA_PCB:"geda-pcb",_CAD_ORCAD:"orcad",_CAD_DIPTRACE:"diptrace"},ga=function(t,e){return t.reduce((function(t,r){return t.concat(e(r))}),[])},_a=function(t){var e=t.reduce((function(t,e){return t[e.cad]=t[e.cad]+1||1,t}),{});return Object.keys(e).reduce((function(t,r){var n=e[r];return n>t.max?{max:n,name:r}:t}),{max:0,name:null}).name},ya=[{type:null,side:null,matchers:[{ext:"gpi",cad:[pa._CAD_EAGLE,pa._CAD_EAGLE_LEGACY,pa._CAD_EAGLE_OSHPARK,pa._CAD_EAGLE_PCBNG]},{ext:"dri",cad:[pa._CAD_EAGLE,pa._CAD_EAGLE_LEGACY,pa._CAD_EAGLE_OSHPARK,pa._CAD_EAGLE_PCBNG]},{ext:"csv",cad:null},{match:/pnp_bom/,cad:pa._CAD_EAGLE_PCBNG}]},{type:pa.TYPE_COPPER,side:pa.SIDE_TOP,matchers:[{ext:"cmp",cad:pa._CAD_EAGLE_LEGACY},{ext:"top",cad:[pa._CAD_EAGLE_LEGACY,pa._CAD_ORCAD]},{ext:"gtl",cad:[pa._CAD_KICAD,pa._CAD_ALTIUM]},{ext:"toplayer\\.ger",cad:pa._CAD_EAGLE_OSHPARK},{match:/top\.\w+$/,cad:[pa._CAD_GEDA_PCB,pa._CAD_DIPTRACE]},{match:/f[._]cu/,cad:pa._CAD_KICAD},{match:/copper_top/,cad:pa._CAD_EAGLE},{match:/top_copper/,cad:pa._CAD_EAGLE_PCBNG},{match:/top copper/,cad:null}]},{type:pa.TYPE_SOLDERMASK,side:pa.SIDE_TOP,matchers:[{ext:"stc",cad:pa._CAD_EAGLE_LEGACY},{ext:"tsm",cad:pa._CAD_EAGLE_LEGACY},{ext:"gts",cad:[pa._CAD_KICAD,pa._CAD_ALTIUM]},{ext:"smt",cad:pa._CAD_ORCAD},{ext:"topsoldermask\\.ger",cad:pa._CAD_EAGLE_OSHPARK},{match:/topmask\.\w+$/,cad:[pa._CAD_GEDA_PCB,pa._CAD_DIPTRACE]},{match:/f[._]mask/,cad:pa._CAD_KICAD},{match:/soldermask_top/,cad:pa._CAD_EAGLE},{match:/top_mask/,cad:pa._CAD_EAGLE_PCBNG},{match:/top solder resist/,cad:null}]},{type:pa.TYPE_SILKSCREEN,side:pa.SIDE_TOP,matchers:[{ext:"plc",cad:pa._CAD_EAGLE_LEGACY},{ext:"tsk",cad:pa._CAD_EAGLE_LEGACY},{ext:"gto",cad:[pa._CAD_KICAD,pa._CAD_ALTIUM]},{ext:"sst",cad:pa._CAD_ORCAD},{ext:"topsilkscreen\\.ger",cad:pa._CAD_EAGLE_OSHPARK},{match:/topsilk\.\w+$/,cad:[pa._CAD_GEDA_PCB,pa._CAD_DIPTRACE]},{match:/f[._]silks/,cad:pa._CAD_KICAD},{match:/silkscreen_top/,cad:pa._CAD_EAGLE},{match:/top_silk/,cad:pa._CAD_EAGLE_PCBNG},{match:/top silk screen/,cad:null}]},{type:pa.TYPE_SOLDERPASTE,side:pa.SIDE_TOP,matchers:[{ext:"crc",cad:pa._CAD_EAGLE_LEGACY},{ext:"tsp",cad:pa._CAD_EAGLE_LEGACY},{ext:"gtp",cad:[pa._CAD_KICAD,pa._CAD_ALTIUM]},{ext:"spt",cad:pa._CAD_ORCAD},{ext:"tcream\\.ger",cad:pa._CAD_EAGLE_OSHPARK},{match:/toppaste\.\w+$/,cad:[pa._CAD_GEDA_PCB,pa._CAD_DIPTRACE]},{match:/f[._]paste/,cad:pa._CAD_KICAD},{match:/solderpaste_top/,cad:pa._CAD_EAGLE},{match:/top_paste/,cad:pa._CAD_EAGLE_PCBNG}]},{type:pa.TYPE_COPPER,side:pa.SIDE_BOTTOM,matchers:[{ext:"sol",cad:pa._CAD_EAGLE_LEGACY},{ext:"bot",cad:[pa._CAD_EAGLE_LEGACY,pa._CAD_ORCAD]},{ext:"gbl",cad:[pa._CAD_KICAD,pa._CAD_ALTIUM]},{ext:"bottomlayer\\.ger",cad:pa._CAD_EAGLE_OSHPARK},{match:/bottom\.\w+$/,cad:[pa._CAD_GEDA_PCB,pa._CAD_DIPTRACE]},{match:/b[._]cu/,cad:pa._CAD_KICAD},{match:/copper_bottom/,cad:pa._CAD_EAGLE},{match:/bottom_copper/,cad:pa._CAD_EAGLE_PCBNG},{match:/bottom copper/,cad:null}]},{type:pa.TYPE_SOLDERMASK,side:pa.SIDE_BOTTOM,matchers:[{ext:"sts",cad:pa._CAD_EAGLE_LEGACY},{ext:"bsm",cad:pa._CAD_EAGLE_LEGACY},{ext:"gbs",cad:[pa._CAD_KICAD,pa._CAD_ALTIUM]},{ext:"smb",cad:pa._CAD_ORCAD},{ext:"bottomsoldermask\\.ger",cad:pa._CAD_EAGLE_OSHPARK},{match:/bottommask\.\w+$/,cad:[pa._CAD_GEDA_PCB,pa._CAD_DIPTRACE]},{match:/b[._]mask/,cad:pa._CAD_KICAD},{match:/soldermask_bottom/,cad:pa._CAD_EAGLE},{match:/bottom_mask/,cad:pa._CAD_EAGLE_PCBNG},{match:/bottom solder resist/,cad:null}]},{type:pa.TYPE_SILKSCREEN,side:pa.SIDE_BOTTOM,matchers:[{ext:"pls",cad:pa._CAD_EAGLE_LEGACY},{ext:"bsk",cad:pa._CAD_EAGLE_LEGACY},{ext:"gbo",cad:[pa._CAD_KICAD,pa._CAD_ALTIUM]},{ext:"ssb",cad:pa._CAD_ORCAD},{ext:"bottomsilkscreen\\.ger",cad:pa._CAD_EAGLE_OSHPARK},{match:/bottomsilk\.\w+$/,cad:[pa._CAD_GEDA_PCB,pa._CAD_DIPTRACE]},{match:/b[._]silks/,cad:pa._CAD_KICAD},{match:/silkscreen_bottom/,cad:pa._CAD_EAGLE},{match:/bottom_silk/,cad:pa._CAD_EAGLE_PCBNG},{match:/bottom silk screen/,cad:null}]},{type:pa.TYPE_SOLDERPASTE,side:pa.SIDE_BOTTOM,matchers:[{ext:"crs",cad:pa._CAD_EAGLE_LEGACY},{ext:"bsp",cad:pa._CAD_EAGLE_LEGACY},{ext:"gbp",cad:[pa._CAD_KICAD,pa._CAD_ALTIUM]},{ext:"spb",cad:pa._CAD_ORCAD},{ext:"bcream\\.ger",cad:pa._CAD_EAGLE_OSHPARK},{match:/bottompaste\.\w+$/,cad:[pa._CAD_GEDA_PCB,pa._CAD_DIPTRACE]},{match:/b[._]paste/,cad:pa._CAD_KICAD},{match:/solderpaste_bottom/,cad:pa._CAD_EAGLE},{match:/bottom_paste/,cad:pa._CAD_EAGLE_PCBNG}]},{type:pa.TYPE_COPPER,side:pa.SIDE_INNER,matchers:[{ext:"ly\\d+",cad:pa._CAD_EAGLE_LEGACY},{ext:"gp?\\d+",cad:[pa._CAD_KICAD,pa._CAD_ALTIUM]},{ext:"in\\d+",cad:pa._CAD_ORCAD},{ext:"internalplane\\d+\\.ger",cad:pa._CAD_EAGLE_OSHPARK},{match:/in(?:ner)?\d+[._]cu/,cad:pa._CAD_KICAD},{match:/inner/,cad:pa._CAD_DIPTRACE}]},{type:pa.TYPE_OUTLINE,side:pa.SIDE_ALL,matchers:[{ext:"dim",cad:pa._CAD_EAGLE_LEGACY},{ext:"mil",cad:pa._CAD_EAGLE_LEGACY},{ext:"gml",cad:pa._CAD_EAGLE_LEGACY},{ext:"gm\\d+",cad:[pa._CAD_KICAD,pa._CAD_ALTIUM]},{ext:"gko",cad:pa._CAD_ALTIUM},{ext:"fab",cad:pa._CAD_ORCAD},{ext:"drd",cad:pa._CAD_ORCAD},{match:/outline/,cad:[pa._CAD_GEDA_PCB,pa._CAD_EAGLE_PCBNG]},{match:/boardoutline/,cad:[pa._CAD_EAGLE_OSHPARK,pa._CAD_DIPTRACE]},{match:/edge[._]cuts/,cad:pa._CAD_KICAD},{match:/profile/,cad:pa._CAD_EAGLE},{match:/mechanical \d+/,cad:null}]},{type:pa.TYPE_DRILL,side:pa.SIDE_ALL,matchers:[{ext:"txt",cad:[pa._CAD_EAGLE_LEGACY,pa._CAD_ALTIUM]},{ext:"xln",cad:[pa._CAD_EAGLE,pa._CAD_EAGLE_LEGACY,pa._CAD_EAGLE_OSHPARK]},{ext:"exc",cad:pa._CAD_EAGLE_LEGACY},{ext:"drd",cad:pa._CAD_EAGLE_LEGACY},{ext:"drl",cad:[pa._CAD_KICAD,pa._CAD_DIPTRACE]},{ext:"tap",cad:pa._CAD_ORCAD},{ext:"npt",cad:pa._CAD_ORCAD},{ext:"plated-drill\\.cnc",cad:pa._CAD_GEDA_PCB},{match:/fab/,cad:pa._CAD_GEDA_PCB},{match:/npth/,cad:pa._CAD_KICAD},{match:"/drill/",cad:pa._CAD_EAGLE_PCBNG}]},{type:pa.TYPE_DRAWING,side:null,matchers:[{ext:"pos",cad:pa._CAD_KICAD},{ext:"art",cad:pa._CAD_ALLEGRO},{ext:"gbr",cad:null},{ext:"gbx",cad:null},{ext:"ger",cad:null},{ext:"pho",cad:null}]}],ba=ga,ma=ba(ya,(function(t){return ba(t.matchers,(function(e){var r=e.ext?new RegExp("\\."+e.ext+"$","i"):new RegExp(e.match,"i");return[].concat(e.cad).map(n);function n(e){return{type:t.type,side:t.side,match:r,cad:e}}}))}));var va,wa,Ea,Aa,Ca,xa,ka=n,La=ma;wa=pa,Ea=ga,Aa=_a,Ca=function(t){return La.map((function(e){return e.match.test(t)?ka(e,{filename:t}):null})).filter(Boolean)},xa=ya,(va=da).exports=function(t){"string"==typeof t&&(t=[t]);var e=Ea(t,Ca),r=Aa(e);return t.reduce((function(t,n){var i=function(t,e,r){var n=t.filter((function(t){return t.filename===e})),i=n.find((function(t){return t.cad===r}));return i||n[0]||null}(e,n,r);return t[n]=i?{type:i.type,side:i.side}:{type:null,side:null},t}),{})},va.exports.validate=function(t){return{valid:xa.some((function(e){return e.side===t.side&&e.type===t.type})),side:xa.some((function(e){return e.side===t.side}))?t.side:null,type:xa.some((function(e){return e.type===t.type}))?t.type:null}},va.exports.getAllLayers=function(){return xa.map((function(t){return{type:t.type,side:t.side}})).filter((function(t){return null!==t.type}))},Object.keys(wa).forEach((function(t){va.exports[t]=wa[t]}));var Sa={create:function(){return[]},add:function(t,e){if(!t.length)return e;if(!e.length)return t;var r=Math.min(t[0],e[0]),n=Math.min(t[1],e[1]);return[r,n,Math.max(t[0]+t[2],e[0]+e[2])-r,Math.max(t[1]+t[3],e[1]+e[3])-n]},scale:function(t,e){return t.map((function(t){return t*e}))},rect:function(t){return{x:(t=t&&t.length?t:[0,0,0,0])[0],y:t[1],width:t[2],height:t[3]}},asString:function(t){return(t=t&&t.length?t:[0,0,0,0]).join(" ")}},Ra={exports:{}},Da={exports:{}},Oa=function(t){return!(!t||"string"==typeof t)&&(t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))},Ta=Array.prototype.concat,Ma=Array.prototype.slice,Ia=Da.exports=function(t){for(var e=[],r=0,n=t.length;r<n;r++){var i=t[r];Oa(i)?e=Ta.call(e,Ma.call(i)):e.push(i)}return e};Ia.wrap=function(t){return function(){return t(Ia(arguments))}};var Pa={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Ba=Da.exports,Na=Object.hasOwnProperty,ja=Object.create(null);for(var Ga in Pa)Na.call(Pa,Ga)&&(ja[Pa[Ga]]=Ga);var Ua=Ra.exports={to:{},get:{}};function Ya(t,e,r){return Math.min(Math.max(e,t),r)}function Fa(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}Ua.get=function(t){var e,r;switch(t.substring(0,3).toLowerCase()){case"hsl":e=Ua.get.hsl(t),r="hsl";break;case"hwb":e=Ua.get.hwb(t),r="hwb";break;default:e=Ua.get.rgb(t),r="rgb"}return e?{model:r,value:e}:null},Ua.get.rgb=function(t){if(!t)return null;var e,r,n,i=[0,0,0,1];if(e=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(n=e[2],e=e[1],r=0;r<3;r++){var o=2*r;i[r]=parseInt(e.slice(o,o+2),16)}n&&(i[3]=parseInt(n,16)/255)}else if(e=t.match(/^#([a-f0-9]{3,4})$/i)){for(n=(e=e[1])[3],r=0;r<3;r++)i[r]=parseInt(e[r]+e[r],16);n&&(i[3]=parseInt(n+n,16)/255)}else if(e=t.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(r=0;r<3;r++)i[r]=parseInt(e[r+1],0);e[4]&&(e[5]?i[3]=.01*parseFloat(e[4]):i[3]=parseFloat(e[4]))}else{if(!(e=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(e=t.match(/^(\w+)$/))?"transparent"===e[1]?[0,0,0,0]:Na.call(Pa,e[1])?((i=Pa[e[1]])[3]=1,i):null:null;for(r=0;r<3;r++)i[r]=Math.round(2.55*parseFloat(e[r+1]));e[4]&&(e[5]?i[3]=.01*parseFloat(e[4]):i[3]=parseFloat(e[4]))}for(r=0;r<3;r++)i[r]=Ya(i[r],0,255);return i[3]=Ya(i[3],0,1),i},Ua.get.hsl=function(t){if(!t)return null;var e=t.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(e){var r=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,Ya(parseFloat(e[2]),0,100),Ya(parseFloat(e[3]),0,100),Ya(isNaN(r)?1:r,0,1)]}return null},Ua.get.hwb=function(t){if(!t)return null;var e=t.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(e){var r=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,Ya(parseFloat(e[2]),0,100),Ya(parseFloat(e[3]),0,100),Ya(isNaN(r)?1:r,0,1)]}return null},Ua.to.hex=function(){var t=Ba(arguments);return"#"+Fa(t[0])+Fa(t[1])+Fa(t[2])+(t[3]<1?Fa(Math.round(255*t[3])):"")},Ua.to.rgb=function(){var t=Ba(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},Ua.to.rgb.percent=function(){var t=Ba(arguments),e=Math.round(t[0]/255*100),r=Math.round(t[1]/255*100),n=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+r+"%, "+n+"%)":"rgba("+e+"%, "+r+"%, "+n+"%, "+t[3]+")"},Ua.to.hsl=function(){var t=Ba(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},Ua.to.hwb=function(){var t=Ba(arguments),e="";return t.length>=4&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},Ua.to.keyword=function(t){return ja[t.slice(0,3)]};var $a=Ra.exports,za=["fr4","cu","cf","sm","ss","sp","out"],qa={fr4:"#666666",cu:"#cccccc",cf:"#cc9933",sm:"#004200bf",ss:"#ffffff",sp:"#999999",out:"#000000"};var Ka={getColor:function(t){return t=t||{},za.reduce((function(e,r){return e[r]=t[r]||qa[r],e}),{})},getStyleElement:function(t,e,r,n){return t("style",{},[za.map((function(t){var r="."+e+t,i=function(t){var e=$a.get(t);if(!e)return"";var r="color: ",n=e.value.slice(0,3),i=null!=e.value[3]?e.value[3]:1;"rgb"===e.model?r+=$a.to.hex(n).toLowerCase():r+=$a.to[e.model](n).toLowerCase();1!==i&&(r+="; opacity: "+i);return r+";"}(n[t]);return r+" {"+i+"}"})).join("\n")])}},Wa=Ka,Ha=d,Va=Do,Xa=da.exports;function Za(t){return null!=t&&null!=t.type&&null!=t.side&&null!=t.converter&&null!=t.converter.layer&&t.converter.layer.length}function Ja(t,e){var r=e.type,n=e.side;return r===Xa.TYPE_DRILL?t.drills.push(e):r===Xa.TYPE_OUTLINE?t.outline=e:n===Xa.SIDE_TOP?t.top.push(e):n===Xa.SIDE_BOTTOM&&t.bottom.push(e),t}var Qa=Sa,ts=da.exports,es=function(t,e,r,n,i){var o=r.layer,a={id:e};return n&&1!==n&&(a.transform="scale("+n+","+n+")"),t(i||"g",a,o)};function rs(t,e){return t===e?1:"in"===t?1/25.4:25.4}var ns=Sa,is=da.exports,os=function(t,e,r,n,i,o){var a=[],s=[],u=[],l="",c={in:0,mm:0},f=r.concat(n,i||[]),h=0,d=function(t){var r=e+t;return t===ts.TYPE_DRILL&&(r+=++h),r};f.forEach((function(t){t.externalId||(a=a.concat(t.converter.defs)),"mm"===t.converter.units?c.mm++:c.in++})),c.in+c.mm&&(l=c.in>c.mm?"in":"mm");var p,g=(o&&i?[i]:f).reduce((function(t,e){var r=e.converter.viewBox,n=e.converter.units;return n&&0!==r[2]&&0!==r[3]?Qa.add(t,Qa.scale(r,rs(l,n))):t}),Qa.create()),_=function(e){return function(r){var n=r.externalId,i=r.converter;n||(n=d(r.type),a.push(es(t,n,i,rs(l,i.units)))),e.push({type:r.type,id:n})}};return r.forEach(_(s)),n.forEach(_(u)),i&&(i.externalId&&!o?p=i.externalId:(p=d(i.type),a.push(es(t,p,i.converter,rs(l,i.converter.units),o?"clipPath":"g")))),{defs:a,box:g,units:l,layerIds:s,drillIds:u,outlineId:p}};function as(t,e){var r,n;for(n=0;n<t.length;n++)if((r=t[n]).type===e)return r.id}function ss(t,e,r,n){var i={"xlink:href":"#"+e};return r&&(i.fill="currentColor",i.stroke="currentColor",i.class=r),n&&(i.mask="url(#"+n+")"),t("use",i)}function us(t,e,r,n){var i=ns.rect(e);return r&&(i.fill=r),n&&(i.class=n),t("rect",i)}var ls=n,cs=da.exports,fs=Sa,hs=Ka,ds=function(t){return"string"==typeof t?t={id:t}:t||(t={}),{id:Ha.ensure(t.id),color:Wa.getColor(t.color),attributes:t.attributes||{},useOutline:null==t.useOutline||t.useOutline,createElement:t.createElement||Va}},ps=function(t){return t.filter(Za).reduce(Ja,{top:[],bottom:[],drills:[],outline:null})},gs=function(t,e,r,n,i,o,a){var s=e+"_",u=e+"_"+r+"_",l=u+"mech-mask",c=os(t,u,n,i,o,a),f=c.defs,h=c.box,d=c.units;n=c.layerIds,i=c.drillIds,f.push(function(t,e,r,n){var i=n.map((function(e){return ss(t,e.id)}));i.unshift(us(t,r,"#fff"));var o=[t("g",{fill:"#000",stroke:"#000"},i)];return t("mask",{id:e},o)}(t,l,h,i));var p=[us(t,h,"currentColor",s+"fr4")],g=as(n,is.TYPE_COPPER),_=as(n,is.TYPE_SOLDERMASK),y=as(n,is.TYPE_SILKSCREEN),b=as(n,is.TYPE_SOLDERPASTE),m=c.outlineId;if(g){var v=u+"cf-mask",w=[t("g",{fill:"#fff",stroke:"#fff"},_?[ss(t,_)]:[us(t,h)])];f.push(t("mask",{id:v},w)),p.push(ss(t,g,s+"cu")),p.push(ss(t,g,s+"cf",v))}if(_){var E=u+"sm-mask",A=[t("g",{fill:"#000",stroke:"#000"},[us(t,h,"#fff"),ss(t,_)])];f.push(t("mask",{id:E},A));var C={mask:"url(#"+E+")"},x=[us(t,h,"currentColor",s+"sm")];y&&x.push(ss(t,y,s+"ss")),p.push(t("g",C,x))}return b&&p.push(ss(t,b,s+"sp")),m&&!a&&p.push(ss(t,m,s+"out")),{defs:f,layer:p,mechMaskId:l,outClipId:m&&a?m:null,box:h,units:d}},_s=[cs.SIDE_TOP,cs.SIDE_BOTTOM],ys={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":0,"fill-rule":"evenodd","clip-rule":"evenodd"};function bs(t,e,r,n){var i={mask:"url(#"+r+")"};if(n&&(i["clip-path"]="url(#"+n+")"),e===cs.SIDE_BOTTOM){var o=2*t[0]+t[2];i.transform="translate("+o+",0) scale(-1,1)"}return i}var ms=n,vs=a,ws=u,Es=l.exports,As=function(t,e){var r=ds(e),n=ps(t),i=r.id,o=r.color,a=r.attributes,s=r.useOutline,u=r.createElement,l=_s.map((function(t){return gs(u,i,t,n[t],n.drills,n.outline,s)})),c=l.reduce((function(t,e){return fs.add(t,e.box)}),fs.create());return 4!==c.length&&(c=[0,0,0,0]),l.reduce((function(t,e,r){var n=_s[r],s=hs.getStyleElement(u,i+"_",n,o),l=e.units,f=e.mechMaskId,h=e.outClipId,d=[s].concat(e.defs),p=[u("g",bs(c,n,f,h),e.layer)],g=u("defs",{},d),_=u("g",function(t){var e=2*t[1]+t[3];return{transform:"translate(0,"+e+") scale(1,-1)"}}(c),p),y=ls(ys,{id:i+"_"+n,viewBox:fs.asString(c),width:c[2]/1e3+l,height:c[3]/1e3+l},a);return t[n]={svg:u("svg",y,[g,_]),attributes:y,defs:d,layer:p,viewBox:c,width:c[2]/1e3,height:c[3]/1e3,units:l},t}),r)},Cs=da.exports,xs=function(t,e,r){var n;if("function"==typeof e&&(r=e,e=null),function(t){if(!Array.isArray(t))throw new Error("first argument should be an array of layers");var e=t.map(ks).filter(Boolean).join(", ");if(e)throw new Error(e)}(t),null==r){if("function"!=typeof Promise)throw new Error("No callback specified and global Promise not found");n=new Promise((function(t,e){r=function(r,n){if(r)return e(r);t(n)}}))}var i=Cs(t.map((function(t){return t.filename})).filter(Boolean));return ws([function(e){var r=t.map(o);vs(r,e)},function(t,r){var n=As(t,e);n.layers=t,r(null,n)}],(function(t,e){if(t)return r(t);r(null,e)})),n;function o(t){return function(r){var n=function(t){var r=t.side,n=t.type;if(t.filename&&void 0===r&&void 0===n){var o=i[t.filename];r=o.side,n=o.type}var a=ms(t.options);null==a.plotAsOutline&&n===Cs.TYPE_OUTLINE&&(a.plotAsOutline=!0);e&&null!=e.outlineGapFill&&a.plotAsOutline&&(a.plotAsOutline=e.outlineGapFill);return ms(t,{side:r,type:n,options:a})}(t);if(n.converter)return r(null,n);var o=Es(n.gerber,n.options,(function(t){if(t)return r(t);n.converter=o,r(null,n)}))}}};function ks(t,e){var r=Cs.validate(t),n=null;return t.converter||t.gerber?t.filename||t.type?t.filename||r.valid||(n="has invalid side/type ("+t.side+"/"+t.type+")"):n="is missing filename or side/type":n="is missing gerber source or cached converter",n?"layer "+e+" "+n:null}export{A as b,W as e,z as i,xs as p,lt as r};
